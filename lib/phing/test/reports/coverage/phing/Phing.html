<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<LINK REL="stylesheet" TYPE="text/css" TITLE="Style" href="../stylesheet.css">
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td class="bannercell" rowspan="2"><a href="http://www.phing.info/"><img src="http://www.phing.info/images/phing.gif" alt="http://www.phing.info/" align="left" border="0"></a></td>
<td style="text-align:right"><h2>Source Code Coverage</h2></td>
</tr>
<tr><td style="text-align:right">Designed for use with <a href="http://www.phpunit.de">PHPUnit</a>, <a href="http://www.xdebug.org/">Xdebug</a> and <a href="http://www.phing.info/">Phing</a>.</td></tr>
</table>
<hr size="1">
<table class="log" cellpadding="5" cellspacing="0" width="100%"><tr class="a">
<td class="small">Methods: 51</td>
<td class="small">LOC: 1408</td>
<td class="small">Statements: 0</td>
</tr></table>
<table class="log" cellpadding="5" cellspacing="0" width="100%"><tbody><tr>
<td class="legendItem" width="0%">Legend:</td>
<td class="legendValue" width="100%">
<span class="legendCovered">executed</span><span class="legendUncovered">not executed</span><span class="legendDeadCode">dead code</span>
</td>
</tr></tbody></table>
<table class="log" cellpadding="5" cellspacing="0" width="100%">
<tr>
<th width="100%">Source file</th>
<th>Statements</th>
<th>Methods</th>
<th width="250" colspan="2" nowrap>Total coverage</th>
</tr>
<tr class="a">
<td>Phing.php</td>
<td>-</td>
<td>0.0%</td>
<td>0.0%</td>
<td><table cellspacing="0" cellpadding="0" border="0" width="100%" style="display: inline"><tr><td class="uncovered" width="200" height="12">Â </td></tr></table></td>
</tr>
</table>
<table cellspacing="0" cellpadding="0" width="100%">
<tr>
<td class="lineCount">1</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">&lt;?php</pre></td>
</tr>
<tr>
<td class="lineCount">2</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">/*</pre></td>
</tr>
<tr>
<td class="lineCount">3</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * $Id: Phing.php 1169 2011-06-20 07:47:00Z mrook $</pre></td>
</tr>
<tr>
<td class="lineCount">4</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> *</pre></td>
</tr>
<tr>
<td class="lineCount">5</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</pre></td>
</tr>
<tr>
<td class="lineCount">6</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</pre></td>
</tr>
<tr>
<td class="lineCount">7</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR</pre></td>
</tr>
<tr>
<td class="lineCount">8</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT</pre></td>
</tr>
<tr>
<td class="lineCount">9</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</pre></td>
</tr>
<tr>
<td class="lineCount">10</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</pre></td>
</tr>
<tr>
<td class="lineCount">11</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,</pre></td>
</tr>
<tr>
<td class="lineCount">12</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY</pre></td>
</tr>
<tr>
<td class="lineCount">13</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</pre></td>
</tr>
<tr>
<td class="lineCount">14</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</pre></td>
</tr>
<tr>
<td class="lineCount">15</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</pre></td>
</tr>
<tr>
<td class="lineCount">16</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> *</pre></td>
</tr>
<tr>
<td class="lineCount">17</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * This software consists of voluntary contributions made by many individuals</pre></td>
</tr>
<tr>
<td class="lineCount">18</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * and is licensed under the LGPL. For more information please see</pre></td>
</tr>
<tr>
<td class="lineCount">19</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * &lt;http://phing.info&gt;.</pre></td>
</tr>
<tr>
<td class="lineCount">20</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> */</pre></td>
</tr>
<tr>
<td class="lineCount">21</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">22</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">require_once 'phing/Project.php';</pre></td>
</tr>
<tr>
<td class="lineCount">23</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">require_once 'phing/ProjectComponent.php';</pre></td>
</tr>
<tr>
<td class="lineCount">24</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">require_once 'phing/Target.php';</pre></td>
</tr>
<tr>
<td class="lineCount">25</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">require_once 'phing/Task.php';</pre></td>
</tr>
<tr>
<td class="lineCount">26</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">27</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/BuildException.php';</pre></td>
</tr>
<tr>
<td class="lineCount">28</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/ConfigurationException.php';</pre></td>
</tr>
<tr>
<td class="lineCount">29</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/BuildEvent.php';</pre></td>
</tr>
<tr>
<td class="lineCount">30</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">31</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/parser/Location.php';</pre></td>
</tr>
<tr>
<td class="lineCount">32</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/parser/ExpatParser.php';</pre></td>
</tr>
<tr>
<td class="lineCount">33</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/parser/AbstractHandler.php';</pre></td>
</tr>
<tr>
<td class="lineCount">34</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/parser/ProjectConfigurator.php';</pre></td>
</tr>
<tr>
<td class="lineCount">35</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/parser/RootHandler.php';</pre></td>
</tr>
<tr>
<td class="lineCount">36</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/parser/ProjectHandler.php';</pre></td>
</tr>
<tr>
<td class="lineCount">37</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/parser/TaskHandler.php';</pre></td>
</tr>
<tr>
<td class="lineCount">38</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/parser/TargetHandler.php';</pre></td>
</tr>
<tr>
<td class="lineCount">39</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/parser/DataTypeHandler.php';</pre></td>
</tr>
<tr>
<td class="lineCount">40</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/parser/NestedElementHandler.php';</pre></td>
</tr>
<tr>
<td class="lineCount">41</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">42</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/system/util/Properties.php';</pre></td>
</tr>
<tr>
<td class="lineCount">43</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/util/StringHelper.php';</pre></td>
</tr>
<tr>
<td class="lineCount">44</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/system/io/PhingFile.php';</pre></td>
</tr>
<tr>
<td class="lineCount">45</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/system/io/OutputStream.php';</pre></td>
</tr>
<tr>
<td class="lineCount">46</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/system/io/FileOutputStream.php';</pre></td>
</tr>
<tr>
<td class="lineCount">47</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/system/io/FileReader.php';</pre></td>
</tr>
<tr>
<td class="lineCount">48</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">include_once 'phing/system/util/Register.php';</pre></td>
</tr>
<tr>
<td class="lineCount">49</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">50</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">/**</pre></td>
</tr>
<tr>
<td class="lineCount">51</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * Entry point into Phing.  This class handles the full lifecycle of a build -- from</pre></td>
</tr>
<tr>
<td class="lineCount">52</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * parsing &amp; handling commandline arguments to assembling the project to shutting down</pre></td>
</tr>
<tr>
<td class="lineCount">53</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * and cleaning up in the end.</pre></td>
</tr>
<tr>
<td class="lineCount">54</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> *</pre></td>
</tr>
<tr>
<td class="lineCount">55</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * If you are invoking Phing from an external application, this is still</pre></td>
</tr>
<tr>
<td class="lineCount">56</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * the class to use.  Your applicaiton can invoke the start() method, passing</pre></td>
</tr>
<tr>
<td class="lineCount">57</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * any commandline arguments or additional properties.</pre></td>
</tr>
<tr>
<td class="lineCount">58</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> *</pre></td>
</tr>
<tr>
<td class="lineCount">59</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * @author    Andreas Aderhold &lt;andi@binarycloud.com&gt;</pre></td>
</tr>
<tr>
<td class="lineCount">60</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * @author    Hans Lellelid &lt;hans@xmpl.org&gt;</pre></td>
</tr>
<tr>
<td class="lineCount">61</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * @version   $Revision: 1169 $</pre></td>
</tr>
<tr>
<td class="lineCount">62</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> * @package   phing</pre></td>
</tr>
<tr>
<td class="lineCount">63</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"> */</pre></td>
</tr>
<tr>
<td class="lineCount">64</td>
<td class="coverageCount"></td>
<td class="srcLineClassStart"><pre class="srcLine">class Phing {</pre></td>
</tr>
<tr>
<td class="lineCount">65</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">66</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** The default build file name */</pre></td>
</tr>
<tr>
<td class="lineCount">67</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    const DEFAULT_BUILD_FILENAME = "build.xml";</pre></td>
</tr>
<tr>
<td class="lineCount">68</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">69</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** Our current message output status. Follows Project::MSG_XXX */</pre></td>
</tr>
<tr>
<td class="lineCount">70</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static $msgOutputLevel = Project::MSG_INFO;</pre></td>
</tr>
<tr>
<td class="lineCount">71</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">72</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** PhingFile that we are using for configuration */</pre></td>
</tr>
<tr>
<td class="lineCount">73</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private $buildFile = null;</pre></td>
</tr>
<tr>
<td class="lineCount">74</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">75</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** The build targets */</pre></td>
</tr>
<tr>
<td class="lineCount">76</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private $targets = array();</pre></td>
</tr>
<tr>
<td class="lineCount">77</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">78</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">79</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Set of properties that are passed in from commandline or invoking code.</pre></td>
</tr>
<tr>
<td class="lineCount">80</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @var Properties</pre></td>
</tr>
<tr>
<td class="lineCount">81</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">82</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static $definedProps;</pre></td>
</tr>
<tr>
<td class="lineCount">83</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">84</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** Names of classes to add as listeners to project */</pre></td>
</tr>
<tr>
<td class="lineCount">85</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private $listeners = array();</pre></td>
</tr>
<tr>
<td class="lineCount">86</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">87</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private $loggerClassname = null;</pre></td>
</tr>
<tr>
<td class="lineCount">88</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">89</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** The class to handle input (can be only one). */</pre></td>
</tr>
<tr>
<td class="lineCount">90</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private $inputHandlerClassname;</pre></td>
</tr>
<tr>
<td class="lineCount">91</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">92</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** Indicates if this phing should be run */</pre></td>
</tr>
<tr>
<td class="lineCount">93</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private $readyToRun = false;</pre></td>
</tr>
<tr>
<td class="lineCount">94</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">95</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** Indicates we should only parse and display the project help information */</pre></td>
</tr>
<tr>
<td class="lineCount">96</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private $projectHelp = false;</pre></td>
</tr>
<tr>
<td class="lineCount">97</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">98</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** Used by utility function getResourcePath() */</pre></td>
</tr>
<tr>
<td class="lineCount">99</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static $importPaths;</pre></td>
</tr>
<tr>
<td class="lineCount">100</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">101</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** System-wide static properties (moved from System) */</pre></td>
</tr>
<tr>
<td class="lineCount">102</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static $properties = array();</pre></td>
</tr>
<tr>
<td class="lineCount">103</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">104</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** Static system timer. */</pre></td>
</tr>
<tr>
<td class="lineCount">105</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static $timer;</pre></td>
</tr>
<tr>
<td class="lineCount">106</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">107</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** The current Project */</pre></td>
</tr>
<tr>
<td class="lineCount">108</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static $currentProject;</pre></td>
</tr>
<tr>
<td class="lineCount">109</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">110</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** Whether to capture PHP errors to buffer. */</pre></td>
</tr>
<tr>
<td class="lineCount">111</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static $phpErrorCapture = false;</pre></td>
</tr>
<tr>
<td class="lineCount">112</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">113</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** Array of captured PHP errors */</pre></td>
</tr>
<tr>
<td class="lineCount">114</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static $capturedPhpErrors = array();</pre></td>
</tr>
<tr>
<td class="lineCount">115</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">116</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">117</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @var OUtputStream Stream for standard output.</pre></td>
</tr>
<tr>
<td class="lineCount">118</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">119</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static $out;</pre></td>
</tr>
<tr>
<td class="lineCount">120</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">121</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">122</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @var OutputStream Stream for error output.</pre></td>
</tr>
<tr>
<td class="lineCount">123</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">124</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static $err;</pre></td>
</tr>
<tr>
<td class="lineCount">125</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">126</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">127</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @var boolean Whether we are using a logfile.</pre></td>
</tr>
<tr>
<td class="lineCount">128</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">129</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static $isLogFileUsed = false;</pre></td>
</tr>
<tr>
<td class="lineCount">130</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">131</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">132</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Array to hold original ini settings that Phing changes (and needs</pre></td>
</tr>
<tr>
<td class="lineCount">133</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * to restore in restoreIni() method).</pre></td>
</tr>
<tr>
<td class="lineCount">134</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">135</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @var array Struct of array(setting-name =&gt; setting-value)</pre></td>
</tr>
<tr>
<td class="lineCount">136</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @see restoreIni()</pre></td>
</tr>
<tr>
<td class="lineCount">137</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">138</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static $origIniSettings = array();</pre></td>
</tr>
<tr>
<td class="lineCount">139</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">140</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">141</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Entry point allowing for more options from other front ends.</pre></td>
</tr>
<tr>
<td class="lineCount">142</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">143</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * This method encapsulates the complete build lifecycle.</pre></td>
</tr>
<tr>
<td class="lineCount">144</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">145</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param array $args The commandline args passed to phing shell script.</pre></td>
</tr>
<tr>
<td class="lineCount">146</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param array $additionalUserProperties   Any additional properties to be passed to Phing (alternative front-end might implement this).</pre></td>
</tr>
<tr>
<td class="lineCount">147</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *                                          These additional properties will be available using the getDefinedProperty() method and will</pre></td>
</tr>
<tr>
<td class="lineCount">148</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *                                          be added to the project's "user" properties</pre></td>
</tr>
<tr>
<td class="lineCount">149</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @see execute()</pre></td>
</tr>
<tr>
<td class="lineCount">150</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @see runBuild()</pre></td>
</tr>
<tr>
<td class="lineCount">151</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @throws Exception - if there is an error during build</pre></td>
</tr>
<tr>
<td class="lineCount">152</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">153</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function start($args, array $additionalUserProperties = null) {</pre></td>
</tr>
<tr>
<td class="lineCount">154</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">155</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        try {</pre></td>
</tr>
<tr>
<td class="lineCount">156</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $m = new Phing();</pre></td>
</tr>
<tr>
<td class="lineCount">157</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $m-&gt;execute($args);</pre></td>
</tr>
<tr>
<td class="lineCount">158</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        } catch (Exception $exc) {</pre></td>
</tr>
<tr>
<td class="lineCount">159</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::handleLogfile();</pre></td>
</tr>
<tr>
<td class="lineCount">160</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            throw $exc;</pre></td>
</tr>
<tr>
<td class="lineCount">161</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">162</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">163</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($additionalUserProperties !== null) {</pre></td>
</tr>
<tr>
<td class="lineCount">164</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            foreach($additionalUserProperties as $key =&gt; $value) {</pre></td>
</tr>
<tr>
<td class="lineCount">165</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $m-&gt;setDefinedProperty($key, $value);</pre></td>
</tr>
<tr>
<td class="lineCount">166</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">167</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">168</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">169</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        try {</pre></td>
</tr>
<tr>
<td class="lineCount">170</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $m-&gt;runBuild();</pre></td>
</tr>
<tr>
<td class="lineCount">171</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        } catch(Exception $exc) {</pre></td>
</tr>
<tr>
<td class="lineCount">172</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::handleLogfile();</pre></td>
</tr>
<tr>
<td class="lineCount">173</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            throw $exc;</pre></td>
</tr>
<tr>
<td class="lineCount">174</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">175</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">176</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // everything fine, shutdown</pre></td>
</tr>
<tr>
<td class="lineCount">177</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::handleLogfile();</pre></td>
</tr>
<tr>
<td class="lineCount">178</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">179</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">180</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">181</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Prints the message of the Exception if it's not null.</pre></td>
</tr>
<tr>
<td class="lineCount">182</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param Exception $t</pre></td>
</tr>
<tr>
<td class="lineCount">183</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">184</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function printMessage(Exception $t) {</pre></td>
</tr>
<tr>
<td class="lineCount">185</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (self::$err === null) { // Make sure our error output is initialized</pre></td>
</tr>
<tr>
<td class="lineCount">186</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::initializeOutputStreams();</pre></td>
</tr>
<tr>
<td class="lineCount">187</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">188</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (self::getMsgOutputLevel() &gt;= Project::MSG_VERBOSE) {</pre></td>
</tr>
<tr>
<td class="lineCount">189</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$err-&gt;write($t-&gt;__toString() . PHP_EOL);</pre></td>
</tr>
<tr>
<td class="lineCount">190</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        } else {</pre></td>
</tr>
<tr>
<td class="lineCount">191</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$err-&gt;write($t-&gt;getMessage() . PHP_EOL);</pre></td>
</tr>
<tr>
<td class="lineCount">192</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">193</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">194</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">195</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">196</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Sets the stdout and stderr streams if they are not already set.</pre></td>
</tr>
<tr>
<td class="lineCount">197</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">198</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static function initializeOutputStreams() {</pre></td>
</tr>
<tr>
<td class="lineCount">199</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (self::$out === null) {</pre></td>
</tr>
<tr>
<td class="lineCount">200</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$out = new OutputStream(fopen("php://stdout", "w"));</pre></td>
</tr>
<tr>
<td class="lineCount">201</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">202</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (self::$err === null) {</pre></td>
</tr>
<tr>
<td class="lineCount">203</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$err = new OutputStream(fopen("php://stderr", "w"));</pre></td>
</tr>
<tr>
<td class="lineCount">204</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">205</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">206</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">207</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">208</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Sets the stream to use for standard (non-error) output.</pre></td>
</tr>
<tr>
<td class="lineCount">209</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param OutputStream $stream The stream to use for standard output.</pre></td>
</tr>
<tr>
<td class="lineCount">210</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">211</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function setOutputStream(OutputStream $stream) {</pre></td>
</tr>
<tr>
<td class="lineCount">212</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$out = $stream;</pre></td>
</tr>
<tr>
<td class="lineCount">213</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">214</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">215</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">216</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Gets the stream to use for standard (non-error) output.</pre></td>
</tr>
<tr>
<td class="lineCount">217</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return OutputStream</pre></td>
</tr>
<tr>
<td class="lineCount">218</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">219</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function getOutputStream() {</pre></td>
</tr>
<tr>
<td class="lineCount">220</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return self::$out;</pre></td>
</tr>
<tr>
<td class="lineCount">221</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">222</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">223</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">224</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Sets the stream to use for error output.</pre></td>
</tr>
<tr>
<td class="lineCount">225</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param OutputStream $stream The stream to use for error output.</pre></td>
</tr>
<tr>
<td class="lineCount">226</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">227</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function setErrorStream(OutputStream $stream) {</pre></td>
</tr>
<tr>
<td class="lineCount">228</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$err = $stream;</pre></td>
</tr>
<tr>
<td class="lineCount">229</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">230</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">231</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">232</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Gets the stream to use for error output.</pre></td>
</tr>
<tr>
<td class="lineCount">233</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return OutputStream</pre></td>
</tr>
<tr>
<td class="lineCount">234</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">235</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function getErrorStream() {</pre></td>
</tr>
<tr>
<td class="lineCount">236</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return self::$err;</pre></td>
</tr>
<tr>
<td class="lineCount">237</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">238</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">239</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">240</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Close logfiles, if we have been writing to them.</pre></td>
</tr>
<tr>
<td class="lineCount">241</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">242</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @since Phing 2.3.0</pre></td>
</tr>
<tr>
<td class="lineCount">243</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">244</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static function handleLogfile() {</pre></td>
</tr>
<tr>
<td class="lineCount">245</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (self::$isLogFileUsed) {</pre></td>
</tr>
<tr>
<td class="lineCount">246</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$err-&gt;close();</pre></td>
</tr>
<tr>
<td class="lineCount">247</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$out-&gt;close();</pre></td>
</tr>
<tr>
<td class="lineCount">248</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">249</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">250</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">251</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">252</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Making output level a static property so that this property</pre></td>
</tr>
<tr>
<td class="lineCount">253</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * can be accessed by other parts of the system, enabling</pre></td>
</tr>
<tr>
<td class="lineCount">254</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * us to display more information -- e.g. backtraces -- for "debug" level.</pre></td>
</tr>
<tr>
<td class="lineCount">255</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return int</pre></td>
</tr>
<tr>
<td class="lineCount">256</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">257</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function getMsgOutputLevel() {</pre></td>
</tr>
<tr>
<td class="lineCount">258</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return self::$msgOutputLevel;</pre></td>
</tr>
<tr>
<td class="lineCount">259</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">260</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">261</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">262</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Command line entry point. This method kicks off the building</pre></td>
</tr>
<tr>
<td class="lineCount">263</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * of a project object and executes a build using either a given</pre></td>
</tr>
<tr>
<td class="lineCount">264</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * target or the default target.</pre></td>
</tr>
<tr>
<td class="lineCount">265</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">266</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param array $args Command line args.</pre></td>
</tr>
<tr>
<td class="lineCount">267</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return void</pre></td>
</tr>
<tr>
<td class="lineCount">268</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">269</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function fire($args) {</pre></td>
</tr>
<tr>
<td class="lineCount">270</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::start($args, null);</pre></td>
</tr>
<tr>
<td class="lineCount">271</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">272</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">273</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">274</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Setup/initialize Phing environment from commandline args.</pre></td>
</tr>
<tr>
<td class="lineCount">275</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param array $args commandline args passed to phing shell.</pre></td>
</tr>
<tr>
<td class="lineCount">276</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return void</pre></td>
</tr>
<tr>
<td class="lineCount">277</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">278</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public function execute($args) {</pre></td>
</tr>
<tr>
<td class="lineCount">279</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">280</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$definedProps = new Properties();</pre></td>
</tr>
<tr>
<td class="lineCount">281</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $this-&gt;searchForThis = null;</pre></td>
</tr>
<tr>
<td class="lineCount">282</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">283</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // 1) First handle any options which should always</pre></td>
</tr>
<tr>
<td class="lineCount">284</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // Note: The order in which these are executed is important (if multiple of these options are specified)</pre></td>
</tr>
<tr>
<td class="lineCount">285</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">286</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (in_array('-help', $args) || in_array('-h', $args)) {</pre></td>
</tr>
<tr>
<td class="lineCount">287</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $this-&gt;printUsage();</pre></td>
</tr>
<tr>
<td class="lineCount">288</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            return;</pre></td>
</tr>
<tr>
<td class="lineCount">289</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">290</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">291</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (in_array('-version', $args) || in_array('-v', $args)) {</pre></td>
</tr>
<tr>
<td class="lineCount">292</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $this-&gt;printVersion();</pre></td>
</tr>
<tr>
<td class="lineCount">293</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            return;</pre></td>
</tr>
<tr>
<td class="lineCount">294</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">295</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">296</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // 2) Next pull out stand-alone args.</pre></td>
</tr>
<tr>
<td class="lineCount">297</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // Note: The order in which these are executed is important (if multiple of these options are specified)</pre></td>
</tr>
<tr>
<td class="lineCount">298</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">299</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (false !== ($key = array_search('-quiet', $args, true)) || false !== ($key = array_search('-q', $args, true))) {</pre></td>
</tr>
<tr>
<td class="lineCount">300</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$msgOutputLevel = Project::MSG_WARN;</pre></td>
</tr>
<tr>
<td class="lineCount">301</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            unset($args[$key]);</pre></td>
</tr>
<tr>
<td class="lineCount">302</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">303</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">304</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (false !== ($key = array_search('-verbose', $args, true))) {</pre></td>
</tr>
<tr>
<td class="lineCount">305</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$msgOutputLevel = Project::MSG_VERBOSE;</pre></td>
</tr>
<tr>
<td class="lineCount">306</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            unset($args[$key]);</pre></td>
</tr>
<tr>
<td class="lineCount">307</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">308</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">309</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (false !== ($key = array_search('-debug', $args, true))) {</pre></td>
</tr>
<tr>
<td class="lineCount">310</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$msgOutputLevel = Project::MSG_DEBUG;</pre></td>
</tr>
<tr>
<td class="lineCount">311</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            unset($args[$key]);</pre></td>
</tr>
<tr>
<td class="lineCount">312</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">313</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">314</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // 3) Finally, cycle through to parse remaining args</pre></td>
</tr>
<tr>
<td class="lineCount">315</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        //</pre></td>
</tr>
<tr>
<td class="lineCount">316</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $keys = array_keys($args); // Use keys and iterate to max(keys) since there may be some gaps</pre></td>
</tr>
<tr>
<td class="lineCount">317</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $max = $keys ? max($keys) : -1;</pre></td>
</tr>
<tr>
<td class="lineCount">318</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        for($i=0; $i &lt;= $max; $i++) {</pre></td>
</tr>
<tr>
<td class="lineCount">319</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">320</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if (!array_key_exists($i, $args)) {</pre></td>
</tr>
<tr>
<td class="lineCount">321</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                // skip this argument, since it must have been removed above.</pre></td>
</tr>
<tr>
<td class="lineCount">322</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                continue;</pre></td>
</tr>
<tr>
<td class="lineCount">323</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">324</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">325</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $arg = $args[$i];</pre></td>
</tr>
<tr>
<td class="lineCount">326</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">327</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if ($arg == "-logfile") {</pre></td>
</tr>
<tr>
<td class="lineCount">328</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                try {</pre></td>
</tr>
<tr>
<td class="lineCount">329</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    // see: http://phing.info/trac/ticket/65</pre></td>
</tr>
<tr>
<td class="lineCount">330</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    if (!isset($args[$i+1])) {</pre></td>
</tr>
<tr>
<td class="lineCount">331</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                        $msg = "You must specify a log file when using the -logfile argument\n";</pre></td>
</tr>
<tr>
<td class="lineCount">332</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                        throw new ConfigurationException($msg);</pre></td>
</tr>
<tr>
<td class="lineCount">333</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    } else {</pre></td>
</tr>
<tr>
<td class="lineCount">334</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                        $logFile = new PhingFile($args[++$i]);</pre></td>
</tr>
<tr>
<td class="lineCount">335</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                        $out = new FileOutputStream($logFile); // overwrite</pre></td>
</tr>
<tr>
<td class="lineCount">336</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                        self::setOutputStream($out);</pre></td>
</tr>
<tr>
<td class="lineCount">337</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                        self::setErrorStream($out);</pre></td>
</tr>
<tr>
<td class="lineCount">338</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                        self::$isLogFileUsed = true;</pre></td>
</tr>
<tr>
<td class="lineCount">339</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    }</pre></td>
</tr>
<tr>
<td class="lineCount">340</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                } catch (IOException $ioe) {</pre></td>
</tr>
<tr>
<td class="lineCount">341</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $msg = "Cannot write on the specified log file. Make sure the path exists and you have write permissions.";</pre></td>
</tr>
<tr>
<td class="lineCount">342</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    throw new ConfigurationException($msg, $ioe);</pre></td>
</tr>
<tr>
<td class="lineCount">343</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                }</pre></td>
</tr>
<tr>
<td class="lineCount">344</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } elseif ($arg == "-buildfile" || $arg == "-file" || $arg == "-f") {</pre></td>
</tr>
<tr>
<td class="lineCount">345</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                if (!isset($args[$i+1])) {</pre></td>
</tr>
<tr>
<td class="lineCount">346</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $msg = "You must specify a buildfile when using the -buildfile argument.";</pre></td>
</tr>
<tr>
<td class="lineCount">347</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    throw new ConfigurationException($msg);</pre></td>
</tr>
<tr>
<td class="lineCount">348</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                } else {</pre></td>
</tr>
<tr>
<td class="lineCount">349</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $this-&gt;buildFile = new PhingFile($args[++$i]);</pre></td>
</tr>
<tr>
<td class="lineCount">350</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                }</pre></td>
</tr>
<tr>
<td class="lineCount">351</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } elseif ($arg == "-listener") {</pre></td>
</tr>
<tr>
<td class="lineCount">352</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                if (!isset($args[$i+1])) {</pre></td>
</tr>
<tr>
<td class="lineCount">353</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $msg = "You must specify a listener class when using the -listener argument";</pre></td>
</tr>
<tr>
<td class="lineCount">354</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    throw new ConfigurationException($msg);</pre></td>
</tr>
<tr>
<td class="lineCount">355</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                } else {</pre></td>
</tr>
<tr>
<td class="lineCount">356</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $this-&gt;listeners[] = $args[++$i];</pre></td>
</tr>
<tr>
<td class="lineCount">357</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                }</pre></td>
</tr>
<tr>
<td class="lineCount">358</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } elseif (StringHelper::startsWith("-D", $arg)) {</pre></td>
</tr>
<tr>
<td class="lineCount">359</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $name = substr($arg, 2);</pre></td>
</tr>
<tr>
<td class="lineCount">360</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $value = null;</pre></td>
</tr>
<tr>
<td class="lineCount">361</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $posEq = strpos($name, "=");</pre></td>
</tr>
<tr>
<td class="lineCount">362</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                if ($posEq !== false) {</pre></td>
</tr>
<tr>
<td class="lineCount">363</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $value = substr($name, $posEq+1);</pre></td>
</tr>
<tr>
<td class="lineCount">364</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $name  = substr($name, 0, $posEq);</pre></td>
</tr>
<tr>
<td class="lineCount">365</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                } elseif ($i &lt; count($args)-1 &amp;&amp; !StringHelper::startsWith("-D", $args[$i + 1])) {</pre></td>
</tr>
<tr>
<td class="lineCount">366</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $value = $args[++$i];</pre></td>
</tr>
<tr>
<td class="lineCount">367</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                }</pre></td>
</tr>
<tr>
<td class="lineCount">368</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                self::$definedProps-&gt;setProperty($name, $value);</pre></td>
</tr>
<tr>
<td class="lineCount">369</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } elseif ($arg == "-logger") {</pre></td>
</tr>
<tr>
<td class="lineCount">370</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                if (!isset($args[$i+1])) {</pre></td>
</tr>
<tr>
<td class="lineCount">371</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $msg = "You must specify a classname when using the -logger argument";</pre></td>
</tr>
<tr>
<td class="lineCount">372</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    throw new ConfigurationException($msg);</pre></td>
</tr>
<tr>
<td class="lineCount">373</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                } else {</pre></td>
</tr>
<tr>
<td class="lineCount">374</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $this-&gt;loggerClassname = $args[++$i];</pre></td>
</tr>
<tr>
<td class="lineCount">375</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                }</pre></td>
</tr>
<tr>
<td class="lineCount">376</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } elseif ($arg == "-inputhandler") {</pre></td>
</tr>
<tr>
<td class="lineCount">377</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                if ($this-&gt;inputHandlerClassname !== null) {</pre></td>
</tr>
<tr>
<td class="lineCount">378</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    throw new ConfigurationException("Only one input handler class may be specified.");</pre></td>
</tr>
<tr>
<td class="lineCount">379</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                }</pre></td>
</tr>
<tr>
<td class="lineCount">380</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                if (!isset($args[$i+1])) {</pre></td>
</tr>
<tr>
<td class="lineCount">381</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $msg = "You must specify a classname when using the -inputhandler argument";</pre></td>
</tr>
<tr>
<td class="lineCount">382</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    throw new ConfigurationException($msg);</pre></td>
</tr>
<tr>
<td class="lineCount">383</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                } else {</pre></td>
</tr>
<tr>
<td class="lineCount">384</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $this-&gt;inputHandlerClassname = $args[++$i];</pre></td>
</tr>
<tr>
<td class="lineCount">385</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                }</pre></td>
</tr>
<tr>
<td class="lineCount">386</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } elseif ($arg == "-propertyfile") {</pre></td>
</tr>
<tr>
<td class="lineCount">387</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                if (!isset($args[$i+1])) {</pre></td>
</tr>
<tr>
<td class="lineCount">388</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $msg = "You must specify a filename when using the -propertyfile argument";</pre></td>
</tr>
<tr>
<td class="lineCount">389</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    throw new ConfigurationException($msg);</pre></td>
</tr>
<tr>
<td class="lineCount">390</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                } else {</pre></td>
</tr>
<tr>
<td class="lineCount">391</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $p = new Properties();</pre></td>
</tr>
<tr>
<td class="lineCount">392</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $p-&gt;load(new PhingFile($args[++$i]));</pre></td>
</tr>
<tr>
<td class="lineCount">393</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    foreach ($p-&gt;getProperties() as $prop =&gt; $value) {</pre></td>
</tr>
<tr>
<td class="lineCount">394</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                        $this-&gt;setProperty($prop, $value);</pre></td>
</tr>
<tr>
<td class="lineCount">395</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    }</pre></td>
</tr>
<tr>
<td class="lineCount">396</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                }</pre></td>
</tr>
<tr>
<td class="lineCount">397</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } elseif ($arg == "-longtargets") {</pre></td>
</tr>
<tr>
<td class="lineCount">398</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                self::$definedProps-&gt;setProperty('phing.showlongtargets', 1);</pre></td>
</tr>
<tr>
<td class="lineCount">399</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } elseif ($arg == "-projecthelp" || $arg == "-targets" || $arg == "-list" || $arg == "-l" || $arg == "-p") {</pre></td>
</tr>
<tr>
<td class="lineCount">400</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                // set the flag to display the targets and quit</pre></td>
</tr>
<tr>
<td class="lineCount">401</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $this-&gt;projectHelp = true;</pre></td>
</tr>
<tr>
<td class="lineCount">402</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } elseif ($arg == "-find") {</pre></td>
</tr>
<tr>
<td class="lineCount">403</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                // eat up next arg if present, default to build.xml</pre></td>
</tr>
<tr>
<td class="lineCount">404</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                if ($i &lt; count($args)-1) {</pre></td>
</tr>
<tr>
<td class="lineCount">405</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $this-&gt;searchForThis = $args[++$i];</pre></td>
</tr>
<tr>
<td class="lineCount">406</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                } else {</pre></td>
</tr>
<tr>
<td class="lineCount">407</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $this-&gt;searchForThis = self::DEFAULT_BUILD_FILENAME;</pre></td>
</tr>
<tr>
<td class="lineCount">408</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                }</pre></td>
</tr>
<tr>
<td class="lineCount">409</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } elseif (substr($arg,0,1) == "-") {</pre></td>
</tr>
<tr>
<td class="lineCount">410</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                // we don't have any more args</pre></td>
</tr>
<tr>
<td class="lineCount">411</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                self::$err-&gt;write("Unknown argument: $arg" . PHP_EOL);</pre></td>
</tr>
<tr>
<td class="lineCount">412</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                self::printUsage();</pre></td>
</tr>
<tr>
<td class="lineCount">413</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                return;</pre></td>
</tr>
<tr>
<td class="lineCount">414</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } else {</pre></td>
</tr>
<tr>
<td class="lineCount">415</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                // if it's no other arg, it may be the target</pre></td>
</tr>
<tr>
<td class="lineCount">416</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                array_push($this-&gt;targets, $arg);</pre></td>
</tr>
<tr>
<td class="lineCount">417</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">418</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">419</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">420</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // if buildFile was not specified on the command line,</pre></td>
</tr>
<tr>
<td class="lineCount">421</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($this-&gt;buildFile === null) {</pre></td>
</tr>
<tr>
<td class="lineCount">422</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // but -find then search for it</pre></td>
</tr>
<tr>
<td class="lineCount">423</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if ($this-&gt;searchForThis !== null) {</pre></td>
</tr>
<tr>
<td class="lineCount">424</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $this-&gt;buildFile = $this-&gt;_findBuildFile(self::getProperty("user.dir"), $this-&gt;searchForThis);</pre></td>
</tr>
<tr>
<td class="lineCount">425</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } else {</pre></td>
</tr>
<tr>
<td class="lineCount">426</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $this-&gt;buildFile = new PhingFile(self::DEFAULT_BUILD_FILENAME);</pre></td>
</tr>
<tr>
<td class="lineCount">427</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">428</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">429</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // make sure buildfile exists</pre></td>
</tr>
<tr>
<td class="lineCount">430</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (!$this-&gt;buildFile-&gt;exists()) {</pre></td>
</tr>
<tr>
<td class="lineCount">431</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            throw new ConfigurationException("Buildfile: " . $this-&gt;buildFile-&gt;__toString() . " does not exist!");</pre></td>
</tr>
<tr>
<td class="lineCount">432</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">433</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">434</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // make sure it's not a directory</pre></td>
</tr>
<tr>
<td class="lineCount">435</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($this-&gt;buildFile-&gt;isDirectory()) {</pre></td>
</tr>
<tr>
<td class="lineCount">436</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            throw new ConfigurationException("Buildfile: " . $this-&gt;buildFile-&gt;__toString() . " is a dir!");</pre></td>
</tr>
<tr>
<td class="lineCount">437</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">438</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">439</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $this-&gt;readyToRun = true;</pre></td>
</tr>
<tr>
<td class="lineCount">440</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">441</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">442</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">443</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Helper to get the parent file for a given file.</pre></td>
</tr>
<tr>
<td class="lineCount">444</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">445</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param PhingFile $file</pre></td>
</tr>
<tr>
<td class="lineCount">446</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return PhingFile Parent file or null if none</pre></td>
</tr>
<tr>
<td class="lineCount">447</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">448</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private function _getParentFile(PhingFile $file) {</pre></td>
</tr>
<tr>
<td class="lineCount">449</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $filename = $file-&gt;getAbsolutePath();</pre></td>
</tr>
<tr>
<td class="lineCount">450</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $file     = new PhingFile($filename);</pre></td>
</tr>
<tr>
<td class="lineCount">451</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $filename = $file-&gt;getParent();</pre></td>
</tr>
<tr>
<td class="lineCount">452</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return ($filename === null) ? null : new PhingFile($filename);</pre></td>
</tr>
<tr>
<td class="lineCount">453</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">454</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">455</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">456</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Search parent directories for the build file.</pre></td>
</tr>
<tr>
<td class="lineCount">457</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">458</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Takes the given target as a suffix to append to each</pre></td>
</tr>
<tr>
<td class="lineCount">459</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * parent directory in search of a build file.  Once the</pre></td>
</tr>
<tr>
<td class="lineCount">460</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * root of the file-system has been reached an exception</pre></td>
</tr>
<tr>
<td class="lineCount">461</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * is thrown.</pre></td>
</tr>
<tr>
<td class="lineCount">462</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">463</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param string $start Start file path.</pre></td>
</tr>
<tr>
<td class="lineCount">464</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param string $suffix Suffix filename to look for in parents.</pre></td>
</tr>
<tr>
<td class="lineCount">465</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return PhingFile A handle to the build file</pre></td>
</tr>
<tr>
<td class="lineCount">466</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">467</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @throws BuildException    Failed to locate a build file</pre></td>
</tr>
<tr>
<td class="lineCount">468</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">469</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private function _findBuildFile($start, $suffix) {</pre></td>
</tr>
<tr>
<td class="lineCount">470</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $startf = new PhingFile($start);</pre></td>
</tr>
<tr>
<td class="lineCount">471</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $parent = new PhingFile($startf-&gt;getAbsolutePath());</pre></td>
</tr>
<tr>
<td class="lineCount">472</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $file   = new PhingFile($parent, $suffix);</pre></td>
</tr>
<tr>
<td class="lineCount">473</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">474</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // check if the target file exists in the current directory</pre></td>
</tr>
<tr>
<td class="lineCount">475</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        while (!$file-&gt;exists()) {</pre></td>
</tr>
<tr>
<td class="lineCount">476</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // change to parent directory</pre></td>
</tr>
<tr>
<td class="lineCount">477</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $parent = $this-&gt;_getParentFile($parent);</pre></td>
</tr>
<tr>
<td class="lineCount">478</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">479</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // if parent is null, then we are at the root of the fs,</pre></td>
</tr>
<tr>
<td class="lineCount">480</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // complain that we can't find the build file.</pre></td>
</tr>
<tr>
<td class="lineCount">481</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if ($parent === null) {</pre></td>
</tr>
<tr>
<td class="lineCount">482</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                throw new ConfigurationException("Could not locate a build file!");</pre></td>
</tr>
<tr>
<td class="lineCount">483</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">484</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // refresh our file handle</pre></td>
</tr>
<tr>
<td class="lineCount">485</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $file = new PhingFile($parent, $suffix);</pre></td>
</tr>
<tr>
<td class="lineCount">486</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">487</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return $file;</pre></td>
</tr>
<tr>
<td class="lineCount">488</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">489</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">490</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">491</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Executes the build.</pre></td>
</tr>
<tr>
<td class="lineCount">492</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return void</pre></td>
</tr>
<tr>
<td class="lineCount">493</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">494</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    function runBuild() {</pre></td>
</tr>
<tr>
<td class="lineCount">495</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">496</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (!$this-&gt;readyToRun) {</pre></td>
</tr>
<tr>
<td class="lineCount">497</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            return;</pre></td>
</tr>
<tr>
<td class="lineCount">498</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">499</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">500</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $project = new Project();</pre></td>
</tr>
<tr>
<td class="lineCount">501</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">502</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setCurrentProject($project);</pre></td>
</tr>
<tr>
<td class="lineCount">503</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        set_error_handler(array('Phing', 'handlePhpError'));</pre></td>
</tr>
<tr>
<td class="lineCount">504</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">505</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $error = null;</pre></td>
</tr>
<tr>
<td class="lineCount">506</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">507</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $this-&gt;addBuildListeners($project);</pre></td>
</tr>
<tr>
<td class="lineCount">508</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $this-&gt;addInputHandler($project);</pre></td>
</tr>
<tr>
<td class="lineCount">509</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">510</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // set this right away, so that it can be used in logging.</pre></td>
</tr>
<tr>
<td class="lineCount">511</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $project-&gt;setUserProperty("phing.file", $this-&gt;buildFile-&gt;getAbsolutePath());</pre></td>
</tr>
<tr>
<td class="lineCount">512</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">513</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        try {</pre></td>
</tr>
<tr>
<td class="lineCount">514</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $project-&gt;fireBuildStarted();</pre></td>
</tr>
<tr>
<td class="lineCount">515</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $project-&gt;init();</pre></td>
</tr>
<tr>
<td class="lineCount">516</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        } catch (Exception $exc) {</pre></td>
</tr>
<tr>
<td class="lineCount">517</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $project-&gt;fireBuildFinished($exc);</pre></td>
</tr>
<tr>
<td class="lineCount">518</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            throw $exc;</pre></td>
</tr>
<tr>
<td class="lineCount">519</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">520</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">521</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $project-&gt;setUserProperty("phing.version", $this-&gt;getPhingVersion());</pre></td>
</tr>
<tr>
<td class="lineCount">522</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">523</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $e = self::$definedProps-&gt;keys();</pre></td>
</tr>
<tr>
<td class="lineCount">524</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        while (count($e)) {</pre></td>
</tr>
<tr>
<td class="lineCount">525</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $arg   = (string) array_shift($e);</pre></td>
</tr>
<tr>
<td class="lineCount">526</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $value = (string) self::$definedProps-&gt;getProperty($arg);</pre></td>
</tr>
<tr>
<td class="lineCount">527</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $project-&gt;setUserProperty($arg, $value);</pre></td>
</tr>
<tr>
<td class="lineCount">528</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">529</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        unset($e);</pre></td>
</tr>
<tr>
<td class="lineCount">530</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">531</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $project-&gt;setUserProperty("phing.file", $this-&gt;buildFile-&gt;getAbsolutePath());</pre></td>
</tr>
<tr>
<td class="lineCount">532</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">533</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // first use the Configurator to create the project object</pre></td>
</tr>
<tr>
<td class="lineCount">534</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // from the given build file.</pre></td>
</tr>
<tr>
<td class="lineCount">535</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">536</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        try {</pre></td>
</tr>
<tr>
<td class="lineCount">537</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            ProjectConfigurator::configureProject($project, $this-&gt;buildFile);</pre></td>
</tr>
<tr>
<td class="lineCount">538</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        } catch (Exception $exc) {</pre></td>
</tr>
<tr>
<td class="lineCount">539</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $project-&gt;fireBuildFinished($exc);</pre></td>
</tr>
<tr>
<td class="lineCount">540</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            restore_error_handler();</pre></td>
</tr>
<tr>
<td class="lineCount">541</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::unsetCurrentProject();</pre></td>
</tr>
<tr>
<td class="lineCount">542</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            throw $exc;</pre></td>
</tr>
<tr>
<td class="lineCount">543</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">544</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">545</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // make sure that we have a target to execute</pre></td>
</tr>
<tr>
<td class="lineCount">546</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (count($this-&gt;targets) === 0) {</pre></td>
</tr>
<tr>
<td class="lineCount">547</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $this-&gt;targets[] = $project-&gt;getDefaultTarget();</pre></td>
</tr>
<tr>
<td class="lineCount">548</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">549</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">550</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // make sure that minimum required phing version is satisfied</pre></td>
</tr>
<tr>
<td class="lineCount">551</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        try {</pre></td>
</tr>
<tr>
<td class="lineCount">552</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $this-&gt;comparePhingVersion($project-&gt;getPhingVersion());</pre></td>
</tr>
<tr>
<td class="lineCount">553</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        } catch(Exception $exc) {</pre></td>
</tr>
<tr>
<td class="lineCount">554</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $project-&gt;fireBuildFinished($exc);</pre></td>
</tr>
<tr>
<td class="lineCount">555</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            restore_error_handler();</pre></td>
</tr>
<tr>
<td class="lineCount">556</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::unsetCurrentProject();</pre></td>
</tr>
<tr>
<td class="lineCount">557</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            throw $exc;</pre></td>
</tr>
<tr>
<td class="lineCount">558</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">559</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">560</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // execute targets if help param was not given</pre></td>
</tr>
<tr>
<td class="lineCount">561</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (!$this-&gt;projectHelp) {</pre></td>
</tr>
<tr>
<td class="lineCount">562</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">563</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            try {</pre></td>
</tr>
<tr>
<td class="lineCount">564</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $project-&gt;executeTargets($this-&gt;targets);</pre></td>
</tr>
<tr>
<td class="lineCount">565</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } catch (Exception $exc) {</pre></td>
</tr>
<tr>
<td class="lineCount">566</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $project-&gt;fireBuildFinished($exc);</pre></td>
</tr>
<tr>
<td class="lineCount">567</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                restore_error_handler();</pre></td>
</tr>
<tr>
<td class="lineCount">568</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                self::unsetCurrentProject();</pre></td>
</tr>
<tr>
<td class="lineCount">569</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                throw $exc;</pre></td>
</tr>
<tr>
<td class="lineCount">570</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">571</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">572</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // if help is requested print it</pre></td>
</tr>
<tr>
<td class="lineCount">573</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($this-&gt;projectHelp) {</pre></td>
</tr>
<tr>
<td class="lineCount">574</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            try {</pre></td>
</tr>
<tr>
<td class="lineCount">575</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $this-&gt;printDescription($project);</pre></td>
</tr>
<tr>
<td class="lineCount">576</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $this-&gt;printTargets($project);</pre></td>
</tr>
<tr>
<td class="lineCount">577</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } catch (Exception $exc) {</pre></td>
</tr>
<tr>
<td class="lineCount">578</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $project-&gt;fireBuildFinished($exc);</pre></td>
</tr>
<tr>
<td class="lineCount">579</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                restore_error_handler();</pre></td>
</tr>
<tr>
<td class="lineCount">580</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                self::unsetCurrentProject();</pre></td>
</tr>
<tr>
<td class="lineCount">581</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                throw $exc;</pre></td>
</tr>
<tr>
<td class="lineCount">582</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">583</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">584</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">585</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // finally {</pre></td>
</tr>
<tr>
<td class="lineCount">586</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (!$this-&gt;projectHelp) {</pre></td>
</tr>
<tr>
<td class="lineCount">587</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $project-&gt;fireBuildFinished(null);</pre></td>
</tr>
<tr>
<td class="lineCount">588</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">589</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">590</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        restore_error_handler();</pre></td>
</tr>
<tr>
<td class="lineCount">591</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::unsetCurrentProject();</pre></td>
</tr>
<tr>
<td class="lineCount">592</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">593</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">594</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private function comparePhingVersion($version) {</pre></td>
</tr>
<tr>
<td class="lineCount">595</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $current = strtolower(self::getPhingVersion());</pre></td>
</tr>
<tr>
<td class="lineCount">596</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $current = trim(str_replace('phing', '', $current));</pre></td>
</tr>
<tr>
<td class="lineCount">597</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">598</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // make sure that version checks are not applied to trunk</pre></td>
</tr>
<tr>
<td class="lineCount">599</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if('dev' === $current) {</pre></td>
</tr>
<tr>
<td class="lineCount">600</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            return 1;</pre></td>
</tr>
<tr>
<td class="lineCount">601</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">602</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">603</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if(-1 == version_compare($current, $version)) {</pre></td>
</tr>
<tr>
<td class="lineCount">604</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            throw new BuildException(</pre></td>
</tr>
<tr>
<td class="lineCount">605</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                sprintf('Incompatible Phing version (%s). Version "%s" required.', $current, $version));</pre></td>
</tr>
<tr>
<td class="lineCount">606</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">607</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">608</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">609</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">610</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Bind any registered build listeners to this project.</pre></td>
</tr>
<tr>
<td class="lineCount">611</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">612</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * This means adding the logger and any build listeners that were specified</pre></td>
</tr>
<tr>
<td class="lineCount">613</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * with -listener arg.</pre></td>
</tr>
<tr>
<td class="lineCount">614</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">615</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param Project $project</pre></td>
</tr>
<tr>
<td class="lineCount">616</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return void</pre></td>
</tr>
<tr>
<td class="lineCount">617</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">618</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private function addBuildListeners(Project $project) {</pre></td>
</tr>
<tr>
<td class="lineCount">619</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // Add the default listener</pre></td>
</tr>
<tr>
<td class="lineCount">620</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $project-&gt;addBuildListener($this-&gt;createLogger());</pre></td>
</tr>
<tr>
<td class="lineCount">621</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">622</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        foreach($this-&gt;listeners as $listenerClassname) {</pre></td>
</tr>
<tr>
<td class="lineCount">623</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            try {</pre></td>
</tr>
<tr>
<td class="lineCount">624</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $clz = Phing::import($listenerClassname);</pre></td>
</tr>
<tr>
<td class="lineCount">625</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } catch (Exception $x) {</pre></td>
</tr>
<tr>
<td class="lineCount">626</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $msg = "Unable to instantiate specified listener "</pre></td>
</tr>
<tr>
<td class="lineCount">627</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                . "class " . $listenerClassname . " : "</pre></td>
</tr>
<tr>
<td class="lineCount">628</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                . $e-&gt;getMessage();</pre></td>
</tr>
<tr>
<td class="lineCount">629</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                throw new ConfigurationException($msg);</pre></td>
</tr>
<tr>
<td class="lineCount">630</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">631</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">632</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $listener = new $clz();</pre></td>
</tr>
<tr>
<td class="lineCount">633</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">634</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if ($listener instanceof StreamRequiredBuildLogger) {</pre></td>
</tr>
<tr>
<td class="lineCount">635</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                throw new ConfigurationException("Unable to add " . $listenerClassname . " as a listener, since it requires explicit error/output streams. (You can specify it as a -logger.)");</pre></td>
</tr>
<tr>
<td class="lineCount">636</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">637</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $project-&gt;addBuildListener($listener);</pre></td>
</tr>
<tr>
<td class="lineCount">638</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">639</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">640</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">641</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">642</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Creates the InputHandler and adds it to the project.</pre></td>
</tr>
<tr>
<td class="lineCount">643</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">644</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param Project $project the project instance.</pre></td>
</tr>
<tr>
<td class="lineCount">645</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">646</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @throws BuildException if a specified InputHandler</pre></td>
</tr>
<tr>
<td class="lineCount">647</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *                           class could not be loaded.</pre></td>
</tr>
<tr>
<td class="lineCount">648</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">649</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private function addInputHandler(Project $project) {</pre></td>
</tr>
<tr>
<td class="lineCount">650</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($this-&gt;inputHandlerClassname === null) {</pre></td>
</tr>
<tr>
<td class="lineCount">651</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $handler = new DefaultInputHandler();</pre></td>
</tr>
<tr>
<td class="lineCount">652</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        } else {</pre></td>
</tr>
<tr>
<td class="lineCount">653</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            try {</pre></td>
</tr>
<tr>
<td class="lineCount">654</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $clz = Phing::import($this-&gt;inputHandlerClassname);</pre></td>
</tr>
<tr>
<td class="lineCount">655</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $handler = new $clz();</pre></td>
</tr>
<tr>
<td class="lineCount">656</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                if ($project !== null &amp;&amp; method_exists($handler, 'setProject')) {</pre></td>
</tr>
<tr>
<td class="lineCount">657</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $handler-&gt;setProject($project);</pre></td>
</tr>
<tr>
<td class="lineCount">658</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                }</pre></td>
</tr>
<tr>
<td class="lineCount">659</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } catch (Exception $e) {</pre></td>
</tr>
<tr>
<td class="lineCount">660</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $msg = "Unable to instantiate specified input handler "</pre></td>
</tr>
<tr>
<td class="lineCount">661</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                . "class " . $this-&gt;inputHandlerClassname . " : "</pre></td>
</tr>
<tr>
<td class="lineCount">662</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                . $e-&gt;getMessage();</pre></td>
</tr>
<tr>
<td class="lineCount">663</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                throw new ConfigurationException($msg);</pre></td>
</tr>
<tr>
<td class="lineCount">664</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">665</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">666</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $project-&gt;setInputHandler($handler);</pre></td>
</tr>
<tr>
<td class="lineCount">667</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">668</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">669</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">670</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Creates the default build logger for sending build events to the log.</pre></td>
</tr>
<tr>
<td class="lineCount">671</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return BuildLogger The created Logger</pre></td>
</tr>
<tr>
<td class="lineCount">672</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">673</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private function createLogger() {</pre></td>
</tr>
<tr>
<td class="lineCount">674</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($this-&gt;loggerClassname !== null) {</pre></td>
</tr>
<tr>
<td class="lineCount">675</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::import($this-&gt;loggerClassname);</pre></td>
</tr>
<tr>
<td class="lineCount">676</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // get class name part</pre></td>
</tr>
<tr>
<td class="lineCount">677</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $classname = self::import($this-&gt;loggerClassname);</pre></td>
</tr>
<tr>
<td class="lineCount">678</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $logger = new $classname;</pre></td>
</tr>
<tr>
<td class="lineCount">679</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if (!($logger instanceof BuildLogger)) {</pre></td>
</tr>
<tr>
<td class="lineCount">680</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                throw new BuildException($classname . ' does not implement the BuildLogger interface.');</pre></td>
</tr>
<tr>
<td class="lineCount">681</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">682</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        } else {</pre></td>
</tr>
<tr>
<td class="lineCount">683</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            require_once 'phing/listener/DefaultLogger.php';</pre></td>
</tr>
<tr>
<td class="lineCount">684</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $logger = new DefaultLogger();</pre></td>
</tr>
<tr>
<td class="lineCount">685</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">686</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $logger-&gt;setMessageOutputLevel(self::$msgOutputLevel);</pre></td>
</tr>
<tr>
<td class="lineCount">687</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $logger-&gt;setOutputStream(self::$out);</pre></td>
</tr>
<tr>
<td class="lineCount">688</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $logger-&gt;setErrorStream(self::$err);</pre></td>
</tr>
<tr>
<td class="lineCount">689</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return $logger;</pre></td>
</tr>
<tr>
<td class="lineCount">690</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">691</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">692</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">693</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Sets the current Project</pre></td>
</tr>
<tr>
<td class="lineCount">694</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param Project $p</pre></td>
</tr>
<tr>
<td class="lineCount">695</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">696</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function setCurrentProject($p) {</pre></td>
</tr>
<tr>
<td class="lineCount">697</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$currentProject = $p;</pre></td>
</tr>
<tr>
<td class="lineCount">698</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">699</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">700</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">701</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Unsets the current Project</pre></td>
</tr>
<tr>
<td class="lineCount">702</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">703</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function unsetCurrentProject() {</pre></td>
</tr>
<tr>
<td class="lineCount">704</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$currentProject = null;</pre></td>
</tr>
<tr>
<td class="lineCount">705</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">706</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">707</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">708</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Gets the current Project.</pre></td>
</tr>
<tr>
<td class="lineCount">709</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return Project Current Project or NULL if none is set yet/still.</pre></td>
</tr>
<tr>
<td class="lineCount">710</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">711</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function getCurrentProject() {</pre></td>
</tr>
<tr>
<td class="lineCount">712</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return self::$currentProject;</pre></td>
</tr>
<tr>
<td class="lineCount">713</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">714</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">715</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">716</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * A static convenience method to send a log to the current (last-setup) Project.</pre></td>
</tr>
<tr>
<td class="lineCount">717</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * If there is no currently-configured Project, then this will do nothing.</pre></td>
</tr>
<tr>
<td class="lineCount">718</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param string $message</pre></td>
</tr>
<tr>
<td class="lineCount">719</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param int $priority Project::MSG_INFO, etc.</pre></td>
</tr>
<tr>
<td class="lineCount">720</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">721</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function log($message, $priority = Project::MSG_INFO) {</pre></td>
</tr>
<tr>
<td class="lineCount">722</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $p = self::getCurrentProject();</pre></td>
</tr>
<tr>
<td class="lineCount">723</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($p) {</pre></td>
</tr>
<tr>
<td class="lineCount">724</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $p-&gt;log($message, $priority);</pre></td>
</tr>
<tr>
<td class="lineCount">725</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">726</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">727</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">728</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">729</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Error handler for PHP errors encountered during the build.</pre></td>
</tr>
<tr>
<td class="lineCount">730</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * This uses the logging for the currently configured project.</pre></td>
</tr>
<tr>
<td class="lineCount">731</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">732</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function handlePhpError($level, $message, $file, $line) {</pre></td>
</tr>
<tr>
<td class="lineCount">733</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">734</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // don't want to print supressed errors</pre></td>
</tr>
<tr>
<td class="lineCount">735</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (error_reporting() &gt; 0) {</pre></td>
</tr>
<tr>
<td class="lineCount">736</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">737</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if (self::$phpErrorCapture) {</pre></td>
</tr>
<tr>
<td class="lineCount">738</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">739</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                self::$capturedPhpErrors[] = array('message' =&gt; $message, 'level' =&gt; $level, 'line' =&gt; $line, 'file' =&gt; $file);</pre></td>
</tr>
<tr>
<td class="lineCount">740</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">741</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } else {</pre></td>
</tr>
<tr>
<td class="lineCount">742</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">743</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $message = '[PHP Error] ' . $message;</pre></td>
</tr>
<tr>
<td class="lineCount">744</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $message .= ' [line ' . $line . ' of ' . $file . ']';</pre></td>
</tr>
<tr>
<td class="lineCount">745</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">746</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                switch ($level) {</pre></td>
</tr>
<tr>
<td class="lineCount">747</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    case 16384: // E_USER_DEPRECATED</pre></td>
</tr>
<tr>
<td class="lineCount">748</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    case 8192:  // E_DEPRECATED</pre></td>
</tr>
<tr>
<td class="lineCount">749</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    case E_STRICT:</pre></td>
</tr>
<tr>
<td class="lineCount">750</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    case E_NOTICE:</pre></td>
</tr>
<tr>
<td class="lineCount">751</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    case E_USER_NOTICE:</pre></td>
</tr>
<tr>
<td class="lineCount">752</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                        self::log($message, Project::MSG_VERBOSE);</pre></td>
</tr>
<tr>
<td class="lineCount">753</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                        break;</pre></td>
</tr>
<tr>
<td class="lineCount">754</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    case E_WARNING:</pre></td>
</tr>
<tr>
<td class="lineCount">755</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    case E_USER_WARNING:</pre></td>
</tr>
<tr>
<td class="lineCount">756</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                        self::log($message, Project::MSG_WARN);</pre></td>
</tr>
<tr>
<td class="lineCount">757</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                        break;</pre></td>
</tr>
<tr>
<td class="lineCount">758</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    case E_ERROR:</pre></td>
</tr>
<tr>
<td class="lineCount">759</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    case E_USER_ERROR:</pre></td>
</tr>
<tr>
<td class="lineCount">760</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    default:</pre></td>
</tr>
<tr>
<td class="lineCount">761</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                        self::log($message, Project::MSG_ERR);</pre></td>
</tr>
<tr>
<td class="lineCount">762</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">763</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                } // switch</pre></td>
</tr>
<tr>
<td class="lineCount">764</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">765</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } // if phpErrorCapture</pre></td>
</tr>
<tr>
<td class="lineCount">766</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">767</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        } // if not @</pre></td>
</tr>
<tr>
<td class="lineCount">768</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">769</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">770</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">771</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">772</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Begins capturing PHP errors to a buffer.</pre></td>
</tr>
<tr>
<td class="lineCount">773</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * While errors are being captured, they are not logged.</pre></td>
</tr>
<tr>
<td class="lineCount">774</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">775</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function startPhpErrorCapture() {</pre></td>
</tr>
<tr>
<td class="lineCount">776</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$phpErrorCapture = true;</pre></td>
</tr>
<tr>
<td class="lineCount">777</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$capturedPhpErrors = array();</pre></td>
</tr>
<tr>
<td class="lineCount">778</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">779</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">780</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">781</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Stops capturing PHP errors to a buffer.</pre></td>
</tr>
<tr>
<td class="lineCount">782</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * The errors will once again be logged after calling this method.</pre></td>
</tr>
<tr>
<td class="lineCount">783</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">784</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function stopPhpErrorCapture() {</pre></td>
</tr>
<tr>
<td class="lineCount">785</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$phpErrorCapture = false;</pre></td>
</tr>
<tr>
<td class="lineCount">786</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">787</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">788</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">789</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Clears the captured errors without affecting the starting/stopping of the capture.</pre></td>
</tr>
<tr>
<td class="lineCount">790</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">791</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function clearCapturedPhpErrors() {</pre></td>
</tr>
<tr>
<td class="lineCount">792</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$capturedPhpErrors = array();</pre></td>
</tr>
<tr>
<td class="lineCount">793</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">794</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">795</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">796</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Gets any PHP errors that were captured to buffer.</pre></td>
</tr>
<tr>
<td class="lineCount">797</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return array array('message' =&gt; message, 'line' =&gt; line number, 'file' =&gt; file name, 'level' =&gt; error level)</pre></td>
</tr>
<tr>
<td class="lineCount">798</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">799</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function getCapturedPhpErrors() {</pre></td>
</tr>
<tr>
<td class="lineCount">800</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return self::$capturedPhpErrors;</pre></td>
</tr>
<tr>
<td class="lineCount">801</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">802</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">803</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**  Prints the usage of how to use this class */</pre></td>
</tr>
<tr>
<td class="lineCount">804</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function printUsage() {</pre></td>
</tr>
<tr>
<td class="lineCount">805</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">806</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg = "";</pre></td>
</tr>
<tr>
<td class="lineCount">807</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "phing [options] [target [target2 [target3] ...]]" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">808</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "Options: " . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">809</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -h -help               print this message" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">810</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -l -list               list available targets in this project" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">811</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -v -version            print the version information and exit" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">812</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -q -quiet              be extra quiet" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">813</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -verbose               be extra verbose" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">814</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -debug                 print debugging information" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">815</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -longtargets           show target descriptions during build" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">816</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -logfile &lt;file&gt;        use given file for log" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">817</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -logger &lt;classname&gt;    the class which is to perform logging" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">818</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -f -buildfile &lt;file&gt;   use given buildfile" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">819</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -D&lt;property&gt;=&lt;value&gt;   use value for given property" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">820</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -propertyfile &lt;file&gt;   load all properties from file" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">821</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -find &lt;file&gt;           search for buildfile towards the root of the" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">822</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "                         filesystem and use it" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">823</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "  -inputhandler &lt;file&gt;   the class to use to handle user input" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">824</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        //$msg .= "  -recursive &lt;file&gt;      search for buildfile downwards and use it" . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">825</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">826</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= "Report bugs to &lt;dev@phing.tigris.org&gt;".PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">827</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$err-&gt;write($msg);</pre></td>
</tr>
<tr>
<td class="lineCount">828</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">829</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">830</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">831</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Prints the current Phing version.</pre></td>
</tr>
<tr>
<td class="lineCount">832</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">833</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function printVersion() {</pre></td>
</tr>
<tr>
<td class="lineCount">834</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$out-&gt;write(self::getPhingVersion().PHP_EOL);</pre></td>
</tr>
<tr>
<td class="lineCount">835</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">836</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">837</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">838</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Gets the current Phing version based on VERSION.TXT file.</pre></td>
</tr>
<tr>
<td class="lineCount">839</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return string</pre></td>
</tr>
<tr>
<td class="lineCount">840</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @throws BuildException - if unable to find version file.</pre></td>
</tr>
<tr>
<td class="lineCount">841</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">842</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function getPhingVersion() {</pre></td>
</tr>
<tr>
<td class="lineCount">843</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $versionPath = self::getResourcePath("phing/etc/VERSION.TXT");</pre></td>
</tr>
<tr>
<td class="lineCount">844</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($versionPath === null) {</pre></td>
</tr>
<tr>
<td class="lineCount">845</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $versionPath = self::getResourcePath("etc/VERSION.TXT");</pre></td>
</tr>
<tr>
<td class="lineCount">846</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">847</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($versionPath === null) {</pre></td>
</tr>
<tr>
<td class="lineCount">848</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            throw new ConfigurationException("No VERSION.TXT file found; try setting phing.home environment variable.");</pre></td>
</tr>
<tr>
<td class="lineCount">849</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">850</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        try { // try to read file</pre></td>
</tr>
<tr>
<td class="lineCount">851</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $buffer = null;</pre></td>
</tr>
<tr>
<td class="lineCount">852</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $file = new PhingFile($versionPath);</pre></td>
</tr>
<tr>
<td class="lineCount">853</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $reader = new FileReader($file);</pre></td>
</tr>
<tr>
<td class="lineCount">854</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $reader-&gt;readInto($buffer);</pre></td>
</tr>
<tr>
<td class="lineCount">855</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $buffer = trim($buffer);</pre></td>
</tr>
<tr>
<td class="lineCount">856</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            //$buffer = "PHING version 1.0, Released 2002-??-??";</pre></td>
</tr>
<tr>
<td class="lineCount">857</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $phingVersion = $buffer;</pre></td>
</tr>
<tr>
<td class="lineCount">858</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        } catch (IOException $iox) {</pre></td>
</tr>
<tr>
<td class="lineCount">859</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            throw new ConfigurationException("Can't read version information file");</pre></td>
</tr>
<tr>
<td class="lineCount">860</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">861</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return $phingVersion;</pre></td>
</tr>
<tr>
<td class="lineCount">862</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">863</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">864</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">865</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Print the project description, if any</pre></td>
</tr>
<tr>
<td class="lineCount">866</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">867</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function printDescription(Project $project) {</pre></td>
</tr>
<tr>
<td class="lineCount">868</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($project-&gt;getDescription() !== null) {</pre></td>
</tr>
<tr>
<td class="lineCount">869</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$out-&gt;write($project-&gt;getDescription() . PHP_EOL);</pre></td>
</tr>
<tr>
<td class="lineCount">870</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">871</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">872</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">873</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** Print out a list of all targets in the current buildfile */</pre></td>
</tr>
<tr>
<td class="lineCount">874</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    function printTargets($project) {</pre></td>
</tr>
<tr>
<td class="lineCount">875</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // find the target with the longest name</pre></td>
</tr>
<tr>
<td class="lineCount">876</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $maxLength = 0;</pre></td>
</tr>
<tr>
<td class="lineCount">877</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $targets = $project-&gt;getTargets();</pre></td>
</tr>
<tr>
<td class="lineCount">878</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $targetNames = array_keys($targets);</pre></td>
</tr>
<tr>
<td class="lineCount">879</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $targetName = null;</pre></td>
</tr>
<tr>
<td class="lineCount">880</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $targetDescription = null;</pre></td>
</tr>
<tr>
<td class="lineCount">881</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $currentTarget = null;</pre></td>
</tr>
<tr>
<td class="lineCount">882</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">883</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // split the targets in top-level and sub-targets depending</pre></td>
</tr>
<tr>
<td class="lineCount">884</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // on the presence of a description</pre></td>
</tr>
<tr>
<td class="lineCount">885</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">886</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $subNames = array();</pre></td>
</tr>
<tr>
<td class="lineCount">887</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $topNameDescMap = array();</pre></td>
</tr>
<tr>
<td class="lineCount">888</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">889</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        foreach($targets as $currentTarget) {</pre></td>
</tr>
<tr>
<td class="lineCount">890</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $targetName = $currentTarget-&gt;getName();</pre></td>
</tr>
<tr>
<td class="lineCount">891</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $targetDescription = $currentTarget-&gt;getDescription();</pre></td>
</tr>
<tr>
<td class="lineCount">892</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if ($currentTarget-&gt;isHidden()) {</pre></td>
</tr>
<tr>
<td class="lineCount">893</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                continue;</pre></td>
</tr>
<tr>
<td class="lineCount">894</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">895</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">896</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // subtargets are targets w/o descriptions</pre></td>
</tr>
<tr>
<td class="lineCount">897</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if ($targetDescription === null) {</pre></td>
</tr>
<tr>
<td class="lineCount">898</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $subNames[] = $targetName;</pre></td>
</tr>
<tr>
<td class="lineCount">899</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            } else {</pre></td>
</tr>
<tr>
<td class="lineCount">900</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                // topNames and topDescriptions are handled later</pre></td>
</tr>
<tr>
<td class="lineCount">901</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                // here we store in hash map (for sorting purposes)</pre></td>
</tr>
<tr>
<td class="lineCount">902</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $topNameDescMap[$targetName] = $targetDescription;</pre></td>
</tr>
<tr>
<td class="lineCount">903</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                if (strlen($targetName) &gt; $maxLength) {</pre></td>
</tr>
<tr>
<td class="lineCount">904</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    $maxLength = strlen($targetName);</pre></td>
</tr>
<tr>
<td class="lineCount">905</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                }</pre></td>
</tr>
<tr>
<td class="lineCount">906</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">907</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">908</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">909</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // Sort the arrays</pre></td>
</tr>
<tr>
<td class="lineCount">910</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        sort($subNames); // sort array values, resetting keys (which are numeric)</pre></td>
</tr>
<tr>
<td class="lineCount">911</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        ksort($topNameDescMap); // sort the keys (targetName) keeping key=&gt;val associations</pre></td>
</tr>
<tr>
<td class="lineCount">912</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">913</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $topNames = array_keys($topNameDescMap);</pre></td>
</tr>
<tr>
<td class="lineCount">914</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $topDescriptions = array_values($topNameDescMap);</pre></td>
</tr>
<tr>
<td class="lineCount">915</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">916</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $defaultTarget = $project-&gt;getDefaultTarget();</pre></td>
</tr>
<tr>
<td class="lineCount">917</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">918</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($defaultTarget !== null &amp;&amp; $defaultTarget !== "") {</pre></td>
</tr>
<tr>
<td class="lineCount">919</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $defaultName = array();</pre></td>
</tr>
<tr>
<td class="lineCount">920</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $defaultDesc = array();</pre></td>
</tr>
<tr>
<td class="lineCount">921</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $defaultName[] = $defaultTarget;</pre></td>
</tr>
<tr>
<td class="lineCount">922</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">923</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $indexOfDefDesc = array_search($defaultTarget, $topNames, true);</pre></td>
</tr>
<tr>
<td class="lineCount">924</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if ($indexOfDefDesc !== false &amp;&amp; $indexOfDefDesc &gt;= 0) {</pre></td>
</tr>
<tr>
<td class="lineCount">925</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $defaultDesc = array();</pre></td>
</tr>
<tr>
<td class="lineCount">926</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $defaultDesc[] = $topDescriptions[$indexOfDefDesc];</pre></td>
</tr>
<tr>
<td class="lineCount">927</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">928</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">929</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $this-&gt;_printTargets($defaultName, $defaultDesc, "Default target:", $maxLength);</pre></td>
</tr>
<tr>
<td class="lineCount">930</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">931</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">932</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $this-&gt;_printTargets($topNames, $topDescriptions, "Main targets:", $maxLength);</pre></td>
</tr>
<tr>
<td class="lineCount">933</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $this-&gt;_printTargets($subNames, null, "Subtargets:", 0);</pre></td>
</tr>
<tr>
<td class="lineCount">934</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">935</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">936</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">937</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Writes a formatted list of target names with an optional description.</pre></td>
</tr>
<tr>
<td class="lineCount">938</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">939</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param array $names The names to be printed.</pre></td>
</tr>
<tr>
<td class="lineCount">940</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *              Must not be &lt;code&gt;null&lt;/code&gt;.</pre></td>
</tr>
<tr>
<td class="lineCount">941</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param array $descriptions The associated target descriptions.</pre></td>
</tr>
<tr>
<td class="lineCount">942</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *                     May be &lt;code&gt;null&lt;/code&gt;, in which case</pre></td>
</tr>
<tr>
<td class="lineCount">943</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *                     no descriptions are displayed.</pre></td>
</tr>
<tr>
<td class="lineCount">944</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *                     If non-&lt;code&gt;null&lt;/code&gt;, this should have</pre></td>
</tr>
<tr>
<td class="lineCount">945</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *                     as many elements as &lt;code&gt;names&lt;/code&gt;.</pre></td>
</tr>
<tr>
<td class="lineCount">946</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param string $heading The heading to display.</pre></td>
</tr>
<tr>
<td class="lineCount">947</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *                Should not be &lt;code&gt;null&lt;/code&gt;.</pre></td>
</tr>
<tr>
<td class="lineCount">948</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param int $maxlen The maximum length of the names of the targets.</pre></td>
</tr>
<tr>
<td class="lineCount">949</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *               If descriptions are given, they are padded to this</pre></td>
</tr>
<tr>
<td class="lineCount">950</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *               position so they line up (so long as the names really</pre></td>
</tr>
<tr>
<td class="lineCount">951</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *               &lt;i&gt;are&lt;/i&gt; shorter than this).</pre></td>
</tr>
<tr>
<td class="lineCount">952</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">953</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private function _printTargets($names, $descriptions, $heading, $maxlen) {</pre></td>
</tr>
<tr>
<td class="lineCount">954</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">955</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $spaces = '  ';</pre></td>
</tr>
<tr>
<td class="lineCount">956</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        while (strlen($spaces) &lt; $maxlen) {</pre></td>
</tr>
<tr>
<td class="lineCount">957</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $spaces .= $spaces;</pre></td>
</tr>
<tr>
<td class="lineCount">958</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">959</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg = "";</pre></td>
</tr>
<tr>
<td class="lineCount">960</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= $heading . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">961</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $msg .= str_repeat("-",79) . PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">962</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">963</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $total = count($names);</pre></td>
</tr>
<tr>
<td class="lineCount">964</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        for($i=0; $i &lt; $total; $i++) {</pre></td>
</tr>
<tr>
<td class="lineCount">965</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $msg .= " ";</pre></td>
</tr>
<tr>
<td class="lineCount">966</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $msg .= $names[$i];</pre></td>
</tr>
<tr>
<td class="lineCount">967</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if (!empty($descriptions)) {</pre></td>
</tr>
<tr>
<td class="lineCount">968</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $msg .= substr($spaces, 0, $maxlen - strlen($names[$i]) + 2);</pre></td>
</tr>
<tr>
<td class="lineCount">969</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $msg .= $descriptions[$i];</pre></td>
</tr>
<tr>
<td class="lineCount">970</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">971</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $msg .= PHP_EOL;</pre></td>
</tr>
<tr>
<td class="lineCount">972</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">973</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($total &gt; 0) {</pre></td>
</tr>
<tr>
<td class="lineCount">974</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$out-&gt;write($msg . PHP_EOL);</pre></td>
</tr>
<tr>
<td class="lineCount">975</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">976</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">977</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">978</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">979</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Import a dot-path notation class path.</pre></td>
</tr>
<tr>
<td class="lineCount">980</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param string $dotPath</pre></td>
</tr>
<tr>
<td class="lineCount">981</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param mixed $classpath String or object supporting __toString()</pre></td>
</tr>
<tr>
<td class="lineCount">982</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return string The unqualified classname (which can be instantiated).</pre></td>
</tr>
<tr>
<td class="lineCount">983</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @throws BuildException - if cannot find the specified file</pre></td>
</tr>
<tr>
<td class="lineCount">984</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">985</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function import($dotPath, $classpath = null) {</pre></td>
</tr>
<tr>
<td class="lineCount">986</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">987</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        /// check if this is a PEAR-style path (@link http://pear.php.net/manual/en/standards.naming.php)</pre></td>
</tr>
<tr>
<td class="lineCount">988</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (strpos($dotPath, '.') === false &amp;&amp; strpos($dotPath, '_') !== false) {</pre></td>
</tr>
<tr>
<td class="lineCount">989</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $classname = $dotPath;</pre></td>
</tr>
<tr>
<td class="lineCount">990</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $dotPath = str_replace('_', '.', $dotPath);</pre></td>
</tr>
<tr>
<td class="lineCount">991</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        } else {</pre></td>
</tr>
<tr>
<td class="lineCount">992</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $classname = StringHelper::unqualify($dotPath);</pre></td>
</tr>
<tr>
<td class="lineCount">993</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">994</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">995</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // first check to see that the class specified hasn't already been included.</pre></td>
</tr>
<tr>
<td class="lineCount">996</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // (this also handles case where this method is called w/ a classname rather than dotpath)</pre></td>
</tr>
<tr>
<td class="lineCount">997</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (class_exists($classname)) {</pre></td>
</tr>
<tr>
<td class="lineCount">998</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            return $classname;</pre></td>
</tr>
<tr>
<td class="lineCount">999</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1000</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1001</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $dotClassname = basename($dotPath);</pre></td>
</tr>
<tr>
<td class="lineCount">1002</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $dotClassnamePos = strlen($dotPath) - strlen($dotClassname);</pre></td>
</tr>
<tr>
<td class="lineCount">1003</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1004</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // 1- temporarily replace escaped '.' with another illegal char (#)</pre></td>
</tr>
<tr>
<td class="lineCount">1005</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $tmp = str_replace('\.', '##', $dotClassname);</pre></td>
</tr>
<tr>
<td class="lineCount">1006</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // 2- swap out the remaining '.' with DIR_SEP</pre></td>
</tr>
<tr>
<td class="lineCount">1007</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $tmp = strtr($tmp, '.', DIRECTORY_SEPARATOR);</pre></td>
</tr>
<tr>
<td class="lineCount">1008</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // 3- swap back the escaped '.'</pre></td>
</tr>
<tr>
<td class="lineCount">1009</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $tmp = str_replace('##', '.', $tmp);</pre></td>
</tr>
<tr>
<td class="lineCount">1010</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1011</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $classFile = $tmp . ".php";</pre></td>
</tr>
<tr>
<td class="lineCount">1012</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1013</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $path = substr_replace($dotPath, $classFile, $dotClassnamePos);</pre></td>
</tr>
<tr>
<td class="lineCount">1014</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1015</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        Phing::__import($path, $classpath);</pre></td>
</tr>
<tr>
<td class="lineCount">1016</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1017</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return $classname;</pre></td>
</tr>
<tr>
<td class="lineCount">1018</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1019</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1020</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1021</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Import a PHP file</pre></td>
</tr>
<tr>
<td class="lineCount">1022</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param string $path Path to the PHP file</pre></td>
</tr>
<tr>
<td class="lineCount">1023</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param mixed $classpath String or object supporting __toString()</pre></td>
</tr>
<tr>
<td class="lineCount">1024</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @throws BuildException - if cannot find the specified file</pre></td>
</tr>
<tr>
<td class="lineCount">1025</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1026</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function __import($path, $classpath = null) {</pre></td>
</tr>
<tr>
<td class="lineCount">1027</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1028</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($classpath) {</pre></td>
</tr>
<tr>
<td class="lineCount">1029</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1030</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // Apparently casting to (string) no longer invokes __toString() automatically.</pre></td>
</tr>
<tr>
<td class="lineCount">1031</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if (is_object($classpath)) {</pre></td>
</tr>
<tr>
<td class="lineCount">1032</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $classpath = $classpath-&gt;__toString();</pre></td>
</tr>
<tr>
<td class="lineCount">1033</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">1034</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1035</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // classpaths are currently additive, but we also don't want to just</pre></td>
</tr>
<tr>
<td class="lineCount">1036</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // indiscriminantly prepand/append stuff to the include_path.  This means</pre></td>
</tr>
<tr>
<td class="lineCount">1037</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // we need to parse current incldue_path, and prepend any</pre></td>
</tr>
<tr>
<td class="lineCount">1038</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // specified classpath locations that are not already in the include_path.</pre></td>
</tr>
<tr>
<td class="lineCount">1039</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            //</pre></td>
</tr>
<tr>
<td class="lineCount">1040</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // NOTE:  the reason why we do it this way instead of just changing include_path</pre></td>
</tr>
<tr>
<td class="lineCount">1041</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // and then changing it back, is that in many cases applications (e.g. Propel) will</pre></td>
</tr>
<tr>
<td class="lineCount">1042</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // include/require class files from within method calls.  This means that not all</pre></td>
</tr>
<tr>
<td class="lineCount">1043</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // necessary files will be included in this import() call, and hence we can't</pre></td>
</tr>
<tr>
<td class="lineCount">1044</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // change the include_path back without breaking those apps.  While this method could</pre></td>
</tr>
<tr>
<td class="lineCount">1045</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // be more expensive than switching &amp; switching back (not sure, but maybe), it makes it</pre></td>
</tr>
<tr>
<td class="lineCount">1046</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // possible to write far less expensive run-time applications (e.g. using Propel), which is</pre></td>
</tr>
<tr>
<td class="lineCount">1047</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // really where speed matters more.</pre></td>
</tr>
<tr>
<td class="lineCount">1048</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1049</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $curr_parts = explode(PATH_SEPARATOR, get_include_path());</pre></td>
</tr>
<tr>
<td class="lineCount">1050</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $add_parts = explode(PATH_SEPARATOR, $classpath);</pre></td>
</tr>
<tr>
<td class="lineCount">1051</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $new_parts = array_diff($add_parts, $curr_parts);</pre></td>
</tr>
<tr>
<td class="lineCount">1052</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if ($new_parts) {</pre></td>
</tr>
<tr>
<td class="lineCount">1053</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                set_include_path(implode(PATH_SEPARATOR, array_merge($new_parts, $curr_parts)));</pre></td>
</tr>
<tr>
<td class="lineCount">1054</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">1055</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1056</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1057</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $ret = include_once($path);</pre></td>
</tr>
<tr>
<td class="lineCount">1058</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1059</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($ret === false) {</pre></td>
</tr>
<tr>
<td class="lineCount">1060</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $msg = "Error importing $path";</pre></td>
</tr>
<tr>
<td class="lineCount">1061</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if (self::getMsgOutputLevel() &gt;= Project::MSG_DEBUG) {</pre></td>
</tr>
<tr>
<td class="lineCount">1062</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $x = new Exception("for-path-trace-only");</pre></td>
</tr>
<tr>
<td class="lineCount">1063</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $msg .= $x-&gt;getTraceAsString();</pre></td>
</tr>
<tr>
<td class="lineCount">1064</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">1065</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            throw new ConfigurationException($msg);</pre></td>
</tr>
<tr>
<td class="lineCount">1066</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1067</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1068</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1069</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1070</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Looks on include path for specified file.</pre></td>
</tr>
<tr>
<td class="lineCount">1071</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return string File found (null if no file found).</pre></td>
</tr>
<tr>
<td class="lineCount">1072</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1073</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function getResourcePath($path) {</pre></td>
</tr>
<tr>
<td class="lineCount">1074</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1075</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (self::$importPaths === null) {</pre></td>
</tr>
<tr>
<td class="lineCount">1076</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $paths = get_include_path();</pre></td>
</tr>
<tr>
<td class="lineCount">1077</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$importPaths = explode(PATH_SEPARATOR, ini_get("include_path"));</pre></td>
</tr>
<tr>
<td class="lineCount">1078</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1079</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1080</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $path = str_replace('\\', DIRECTORY_SEPARATOR, $path);</pre></td>
</tr>
<tr>
<td class="lineCount">1081</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $path = str_replace('/', DIRECTORY_SEPARATOR, $path);</pre></td>
</tr>
<tr>
<td class="lineCount">1082</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1083</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        foreach (self::$importPaths as $prefix) {</pre></td>
</tr>
<tr>
<td class="lineCount">1084</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $testPath = $prefix . DIRECTORY_SEPARATOR . $path;</pre></td>
</tr>
<tr>
<td class="lineCount">1085</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if (file_exists($testPath)) {</pre></td>
</tr>
<tr>
<td class="lineCount">1086</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                return $testPath;</pre></td>
</tr>
<tr>
<td class="lineCount">1087</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">1088</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1089</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1090</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // Check for the property phing.home</pre></td>
</tr>
<tr>
<td class="lineCount">1091</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $homeDir = self::getProperty('phing.home');</pre></td>
</tr>
<tr>
<td class="lineCount">1092</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($homeDir) {</pre></td>
</tr>
<tr>
<td class="lineCount">1093</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $testPath = $homeDir . DIRECTORY_SEPARATOR . $path;</pre></td>
</tr>
<tr>
<td class="lineCount">1094</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if (file_exists($testPath)) {</pre></td>
</tr>
<tr>
<td class="lineCount">1095</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                return $testPath;</pre></td>
</tr>
<tr>
<td class="lineCount">1096</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">1097</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1098</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1099</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // If we are using this via PEAR then check for the file in the data dir</pre></td>
</tr>
<tr>
<td class="lineCount">1100</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // This is a bit of a hack, but works better than previous solution of assuming</pre></td>
</tr>
<tr>
<td class="lineCount">1101</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // data_dir is on the include_path.</pre></td>
</tr>
<tr>
<td class="lineCount">1102</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $dataDir = '@DATA-DIR@';</pre></td>
</tr>
<tr>
<td class="lineCount">1103</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($dataDir{0} != '@') { // if we're using PEAR then the @ DATA-DIR @ token will have been substituted.</pre></td>
</tr>
<tr>
<td class="lineCount">1104</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $testPath = $dataDir . DIRECTORY_SEPARATOR . $path;</pre></td>
</tr>
<tr>
<td class="lineCount">1105</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if (file_exists($testPath)) {</pre></td>
</tr>
<tr>
<td class="lineCount">1106</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                return $testPath;</pre></td>
</tr>
<tr>
<td class="lineCount">1107</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">1108</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        } else {</pre></td>
</tr>
<tr>
<td class="lineCount">1109</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // We're not using PEAR, so do one additional check based on path of</pre></td>
</tr>
<tr>
<td class="lineCount">1110</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // current file (Phing.php)</pre></td>
</tr>
<tr>
<td class="lineCount">1111</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $maybeHomeDir = realpath(dirname(__FILE__) . DIRECTORY_SEPARATOR . '..' . DIRECTORY_SEPARATOR  . '..');</pre></td>
</tr>
<tr>
<td class="lineCount">1112</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $testPath = $maybeHomeDir . DIRECTORY_SEPARATOR . $path;</pre></td>
</tr>
<tr>
<td class="lineCount">1113</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if (file_exists($testPath)) {</pre></td>
</tr>
<tr>
<td class="lineCount">1114</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                return $testPath;</pre></td>
</tr>
<tr>
<td class="lineCount">1115</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">1116</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1117</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1118</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return null;</pre></td>
</tr>
<tr>
<td class="lineCount">1119</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1120</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1121</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    // -------------------------------------------------------------------------------------------</pre></td>
</tr>
<tr>
<td class="lineCount">1122</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    // System-wide methods (moved from System class, which had namespace conflicts w/ PEAR System)</pre></td>
</tr>
<tr>
<td class="lineCount">1123</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    // -------------------------------------------------------------------------------------------</pre></td>
</tr>
<tr>
<td class="lineCount">1124</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1125</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1126</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Set System constants which can be retrieved by calling Phing::getProperty($propName).</pre></td>
</tr>
<tr>
<td class="lineCount">1127</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return void</pre></td>
</tr>
<tr>
<td class="lineCount">1128</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1129</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static function setSystemConstants() {</pre></td>
</tr>
<tr>
<td class="lineCount">1130</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1131</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        /*</pre></td>
</tr>
<tr>
<td class="lineCount">1132</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">         * PHP_OS returns on</pre></td>
</tr>
<tr>
<td class="lineCount">1133</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">         *   WindowsNT4.0sp6  =&gt; WINNT</pre></td>
</tr>
<tr>
<td class="lineCount">1134</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">         *   Windows2000      =&gt; WINNT</pre></td>
</tr>
<tr>
<td class="lineCount">1135</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">         *   Windows ME       =&gt; WIN32</pre></td>
</tr>
<tr>
<td class="lineCount">1136</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">         *   Windows 98SE     =&gt; WIN32</pre></td>
</tr>
<tr>
<td class="lineCount">1137</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">         *   FreeBSD 4.5p7    =&gt; FreeBSD</pre></td>
</tr>
<tr>
<td class="lineCount">1138</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">         *   Redhat Linux     =&gt; Linux</pre></td>
</tr>
<tr>
<td class="lineCount">1139</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">         *   Mac OS X         =&gt; Darwin</pre></td>
</tr>
<tr>
<td class="lineCount">1140</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">         */</pre></td>
</tr>
<tr>
<td class="lineCount">1141</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setProperty('host.os', PHP_OS);</pre></td>
</tr>
<tr>
<td class="lineCount">1142</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1143</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // this is used by some tasks too</pre></td>
</tr>
<tr>
<td class="lineCount">1144</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setProperty('os.name', PHP_OS);</pre></td>
</tr>
<tr>
<td class="lineCount">1145</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1146</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // it's still possible this won't be defined,</pre></td>
</tr>
<tr>
<td class="lineCount">1147</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // e.g. if Phing is being included in another app w/o</pre></td>
</tr>
<tr>
<td class="lineCount">1148</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // using the phing.php script.</pre></td>
</tr>
<tr>
<td class="lineCount">1149</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (!defined('PHP_CLASSPATH')) {</pre></td>
</tr>
<tr>
<td class="lineCount">1150</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            define('PHP_CLASSPATH', get_include_path());</pre></td>
</tr>
<tr>
<td class="lineCount">1151</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1152</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1153</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setProperty('php.classpath', PHP_CLASSPATH);</pre></td>
</tr>
<tr>
<td class="lineCount">1154</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1155</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // try to determine the host filesystem and set system property</pre></td>
</tr>
<tr>
<td class="lineCount">1156</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // used by Fileself::getFileSystem to instantiate the correct</pre></td>
</tr>
<tr>
<td class="lineCount">1157</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // abstraction layer</pre></td>
</tr>
<tr>
<td class="lineCount">1158</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1159</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        switch (strtoupper(PHP_OS)) {</pre></td>
</tr>
<tr>
<td class="lineCount">1160</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            case 'WINNT':</pre></td>
</tr>
<tr>
<td class="lineCount">1161</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                self::setProperty('host.fstype', 'WINNT');</pre></td>
</tr>
<tr>
<td class="lineCount">1162</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                self::setProperty('php.interpreter', getenv('PHP_COMMAND'));</pre></td>
</tr>
<tr>
<td class="lineCount">1163</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                break;</pre></td>
</tr>
<tr>
<td class="lineCount">1164</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            case 'WIN32':</pre></td>
</tr>
<tr>
<td class="lineCount">1165</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                self::setProperty('host.fstype', 'WIN32');</pre></td>
</tr>
<tr>
<td class="lineCount">1166</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                break;</pre></td>
</tr>
<tr>
<td class="lineCount">1167</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            default:</pre></td>
</tr>
<tr>
<td class="lineCount">1168</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                self::setProperty('host.fstype', 'UNIX');</pre></td>
</tr>
<tr>
<td class="lineCount">1169</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                break;</pre></td>
</tr>
<tr>
<td class="lineCount">1170</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1171</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1172</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setProperty('line.separator', PHP_EOL);</pre></td>
</tr>
<tr>
<td class="lineCount">1173</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setProperty('php.version', PHP_VERSION);</pre></td>
</tr>
<tr>
<td class="lineCount">1174</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setProperty('user.home', getenv('HOME'));</pre></td>
</tr>
<tr>
<td class="lineCount">1175</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setProperty('application.startdir', getcwd());</pre></td>
</tr>
<tr>
<td class="lineCount">1176</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setProperty('phing.startTime', gmdate('D, d M Y H:i:s', time()) . ' GMT');</pre></td>
</tr>
<tr>
<td class="lineCount">1177</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1178</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // try to detect machine dependent information</pre></td>
</tr>
<tr>
<td class="lineCount">1179</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $sysInfo = array();</pre></td>
</tr>
<tr>
<td class="lineCount">1180</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (strtoupper(substr(PHP_OS, 0, 3)) !== 'WIN' &amp;&amp; function_exists("posix_uname")) {</pre></td>
</tr>
<tr>
<td class="lineCount">1181</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $sysInfo = posix_uname();</pre></td>
</tr>
<tr>
<td class="lineCount">1182</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        } else {</pre></td>
</tr>
<tr>
<td class="lineCount">1183</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $sysInfo['nodename'] = php_uname('n');</pre></td>
</tr>
<tr>
<td class="lineCount">1184</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $sysInfo['machine']= php_uname('m') ;</pre></td>
</tr>
<tr>
<td class="lineCount">1185</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            //this is a not so ideal substition, but maybe better than nothing</pre></td>
</tr>
<tr>
<td class="lineCount">1186</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $sysInfo['domain'] = isset($_SERVER['SERVER_NAME']) ? $_SERVER['SERVER_NAME'] : "unknown";</pre></td>
</tr>
<tr>
<td class="lineCount">1187</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $sysInfo['release'] = php_uname('r');</pre></td>
</tr>
<tr>
<td class="lineCount">1188</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $sysInfo['version'] = php_uname('v');</pre></td>
</tr>
<tr>
<td class="lineCount">1189</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1190</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1191</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1192</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setProperty("host.name", isset($sysInfo['nodename']) ? $sysInfo['nodename'] : "unknown");</pre></td>
</tr>
<tr>
<td class="lineCount">1193</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setProperty("host.arch", isset($sysInfo['machine']) ? $sysInfo['machine'] : "unknown");</pre></td>
</tr>
<tr>
<td class="lineCount">1194</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setProperty("host.domain",isset($sysInfo['domain']) ? $sysInfo['domain'] : "unknown");</pre></td>
</tr>
<tr>
<td class="lineCount">1195</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setProperty("host.os.release", isset($sysInfo['release']) ? $sysInfo['release'] : "unknown");</pre></td>
</tr>
<tr>
<td class="lineCount">1196</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setProperty("host.os.version", isset($sysInfo['version']) ? $sysInfo['version'] : "unknown");</pre></td>
</tr>
<tr>
<td class="lineCount">1197</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        unset($sysInfo);</pre></td>
</tr>
<tr>
<td class="lineCount">1198</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1199</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1200</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1201</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * This gets a property that was set via command line or otherwise passed into Phing.</pre></td>
</tr>
<tr>
<td class="lineCount">1202</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * "Defined" in this case means "externally defined".  The reason this method exists is to</pre></td>
</tr>
<tr>
<td class="lineCount">1203</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * provide a public means of accessing commandline properties for (e.g.) logger or listener</pre></td>
</tr>
<tr>
<td class="lineCount">1204</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * scripts.  E.g. to specify which logfile to use, PearLogger needs to be able to access</pre></td>
</tr>
<tr>
<td class="lineCount">1205</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * the pear.log.name property.</pre></td>
</tr>
<tr>
<td class="lineCount">1206</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">1207</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param string $name</pre></td>
</tr>
<tr>
<td class="lineCount">1208</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return string value of found property (or null, if none found).</pre></td>
</tr>
<tr>
<td class="lineCount">1209</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1210</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function getDefinedProperty($name) {</pre></td>
</tr>
<tr>
<td class="lineCount">1211</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return self::$definedProps-&gt;getProperty($name);</pre></td>
</tr>
<tr>
<td class="lineCount">1212</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1213</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1214</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1215</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * This sets a property that was set via command line or otherwise passed into Phing.</pre></td>
</tr>
<tr>
<td class="lineCount">1216</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">1217</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param string $name</pre></td>
</tr>
<tr>
<td class="lineCount">1218</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return string value of found property (or null, if none found).</pre></td>
</tr>
<tr>
<td class="lineCount">1219</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1220</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function setDefinedProperty($name, $value) {</pre></td>
</tr>
<tr>
<td class="lineCount">1221</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return self::$definedProps-&gt;setProperty($name, $value);</pre></td>
</tr>
<tr>
<td class="lineCount">1222</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1223</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1224</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1225</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Returns property value for a System property.</pre></td>
</tr>
<tr>
<td class="lineCount">1226</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * System properties are "global" properties like application.startdir,</pre></td>
</tr>
<tr>
<td class="lineCount">1227</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * and user.dir.  Many of these correspond to similar properties in Java</pre></td>
</tr>
<tr>
<td class="lineCount">1228</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * or Ant.</pre></td>
</tr>
<tr>
<td class="lineCount">1229</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">1230</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param string $paramName</pre></td>
</tr>
<tr>
<td class="lineCount">1231</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return string Value of found property (or null, if none found).</pre></td>
</tr>
<tr>
<td class="lineCount">1232</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1233</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function getProperty($propName) {</pre></td>
</tr>
<tr>
<td class="lineCount">1234</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1235</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // some properties are detemined on each access</pre></td>
</tr>
<tr>
<td class="lineCount">1236</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // some are cached, see below</pre></td>
</tr>
<tr>
<td class="lineCount">1237</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1238</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // default is the cached value:</pre></td>
</tr>
<tr>
<td class="lineCount">1239</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $val = isset(self::$properties[$propName]) ? self::$properties[$propName] : null;</pre></td>
</tr>
<tr>
<td class="lineCount">1240</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1241</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // special exceptions</pre></td>
</tr>
<tr>
<td class="lineCount">1242</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        switch($propName) {</pre></td>
</tr>
<tr>
<td class="lineCount">1243</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            case 'user.dir':</pre></td>
</tr>
<tr>
<td class="lineCount">1244</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $val = getcwd();</pre></td>
</tr>
<tr>
<td class="lineCount">1245</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                break;</pre></td>
</tr>
<tr>
<td class="lineCount">1246</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1247</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1248</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return $val;</pre></td>
</tr>
<tr>
<td class="lineCount">1249</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1250</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1251</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /** Retuns reference to all properties*/</pre></td>
</tr>
<tr>
<td class="lineCount">1252</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function &amp;getProperties() {</pre></td>
</tr>
<tr>
<td class="lineCount">1253</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return self::$properties;</pre></td>
</tr>
<tr>
<td class="lineCount">1254</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1255</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1256</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function setProperty($propName, $propValue) {</pre></td>
</tr>
<tr>
<td class="lineCount">1257</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $propName = (string) $propName;</pre></td>
</tr>
<tr>
<td class="lineCount">1258</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $oldValue = self::getProperty($propName);</pre></td>
</tr>
<tr>
<td class="lineCount">1259</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$properties[$propName] = $propValue;</pre></td>
</tr>
<tr>
<td class="lineCount">1260</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return $oldValue;</pre></td>
</tr>
<tr>
<td class="lineCount">1261</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1262</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1263</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function currentTimeMillis() {</pre></td>
</tr>
<tr>
<td class="lineCount">1264</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        list($usec, $sec) = explode(" ",microtime());</pre></td>
</tr>
<tr>
<td class="lineCount">1265</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return ((float)$usec + (float)$sec);</pre></td>
</tr>
<tr>
<td class="lineCount">1266</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1267</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1268</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1269</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Sets the include path to PHP_CLASSPATH constant (if this has been defined).</pre></td>
</tr>
<tr>
<td class="lineCount">1270</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return void</pre></td>
</tr>
<tr>
<td class="lineCount">1271</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @throws ConfigurationException - if the include_path could not be set (for some bizarre reason)</pre></td>
</tr>
<tr>
<td class="lineCount">1272</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1273</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static function setIncludePaths() {</pre></td>
</tr>
<tr>
<td class="lineCount">1274</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (defined('PHP_CLASSPATH')) {</pre></td>
</tr>
<tr>
<td class="lineCount">1275</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            $result = set_include_path(PHP_CLASSPATH);</pre></td>
</tr>
<tr>
<td class="lineCount">1276</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            if ($result === false) {</pre></td>
</tr>
<tr>
<td class="lineCount">1277</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                throw new ConfigurationException("Could not set PHP include_path.");</pre></td>
</tr>
<tr>
<td class="lineCount">1278</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">1279</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$origIniSettings['include_path'] = $result; // save original value for setting back later</pre></td>
</tr>
<tr>
<td class="lineCount">1280</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1281</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1282</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1283</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1284</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Converts shorthand notation values as returned by ini_get()</pre></td>
</tr>
<tr>
<td class="lineCount">1285</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @see http://www.php.net/ini_get</pre></td>
</tr>
<tr>
<td class="lineCount">1286</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @param string $val</pre></td>
</tr>
<tr>
<td class="lineCount">1287</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1288</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static function convertShorthand($val)</pre></td>
</tr>
<tr>
<td class="lineCount">1289</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    {</pre></td>
</tr>
<tr>
<td class="lineCount">1290</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $val = trim($val);</pre></td>
</tr>
<tr>
<td class="lineCount">1291</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $last = strtolower($val[strlen($val) - 1]);</pre></td>
</tr>
<tr>
<td class="lineCount">1292</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1293</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        switch($last) {</pre></td>
</tr>
<tr>
<td class="lineCount">1294</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // The 'G' modifier is available since PHP 5.1.0</pre></td>
</tr>
<tr>
<td class="lineCount">1295</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            case 'g':</pre></td>
</tr>
<tr>
<td class="lineCount">1296</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $val *= 1024;</pre></td>
</tr>
<tr>
<td class="lineCount">1297</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            case 'm':</pre></td>
</tr>
<tr>
<td class="lineCount">1298</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $val *= 1024;</pre></td>
</tr>
<tr>
<td class="lineCount">1299</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            case 'k':</pre></td>
</tr>
<tr>
<td class="lineCount">1300</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                $val *= 1024;</pre></td>
</tr>
<tr>
<td class="lineCount">1301</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1302</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1303</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return $val;</pre></td>
</tr>
<tr>
<td class="lineCount">1304</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1305</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1306</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1307</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Sets PHP INI values that Phing needs.</pre></td>
</tr>
<tr>
<td class="lineCount">1308</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return void</pre></td>
</tr>
<tr>
<td class="lineCount">1309</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1310</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static function setIni() {</pre></td>
</tr>
<tr>
<td class="lineCount">1311</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1312</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$origIniSettings['error_reporting'] = error_reporting(E_ALL);</pre></td>
</tr>
<tr>
<td class="lineCount">1313</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1314</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // We won't bother storing original max_execution_time, since 1) the value in</pre></td>
</tr>
<tr>
<td class="lineCount">1315</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // php.ini may be wrong (and there's no way to get the current value) and</pre></td>
</tr>
<tr>
<td class="lineCount">1316</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // 2) it would mean something very strange to set it to a value less than time script</pre></td>
</tr>
<tr>
<td class="lineCount">1317</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // has already been running, which would be the likely change.</pre></td>
</tr>
<tr>
<td class="lineCount">1318</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1319</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        set_time_limit(0);</pre></td>
</tr>
<tr>
<td class="lineCount">1320</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1321</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$origIniSettings['magic_quotes_gpc'] = ini_set('magic_quotes_gpc', 'off');</pre></td>
</tr>
<tr>
<td class="lineCount">1322</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$origIniSettings['short_open_tag'] = ini_set('short_open_tag', 'off');</pre></td>
</tr>
<tr>
<td class="lineCount">1323</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$origIniSettings['default_charset'] = ini_set('default_charset', 'iso-8859-1');</pre></td>
</tr>
<tr>
<td class="lineCount">1324</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$origIniSettings['register_globals'] = ini_set('register_globals', 'off');</pre></td>
</tr>
<tr>
<td class="lineCount">1325</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$origIniSettings['allow_call_time_pass_reference'] = ini_set('allow_call_time_pass_reference', 'on');</pre></td>
</tr>
<tr>
<td class="lineCount">1326</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::$origIniSettings['track_errors'] = ini_set('track_errors', 1);</pre></td>
</tr>
<tr>
<td class="lineCount">1327</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1328</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        $mem_limit = (int) self::convertShorthand(ini_get('memory_limit'));</pre></td>
</tr>
<tr>
<td class="lineCount">1329</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if ($mem_limit &lt; (32 * 1024 * 1024) &amp;&amp; $mem_limit &gt; -1) {</pre></td>
</tr>
<tr>
<td class="lineCount">1330</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // We do *not* need to save the original value here, since we don't plan to restore</pre></td>
</tr>
<tr>
<td class="lineCount">1331</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            // this after shutdown (we don't trust the effectiveness of PHP's garbage collection).</pre></td>
</tr>
<tr>
<td class="lineCount">1332</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            ini_set('memory_limit', '32M'); // nore: this may need to be higher for many projects</pre></td>
</tr>
<tr>
<td class="lineCount">1333</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1334</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1335</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1336</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1337</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Restores [most] PHP INI values to their pre-Phing state.</pre></td>
</tr>
<tr>
<td class="lineCount">1338</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">1339</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Currently the following settings are not restored:</pre></td>
</tr>
<tr>
<td class="lineCount">1340</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *  - max_execution_time (because getting current time limit is not possible)</pre></td>
</tr>
<tr>
<td class="lineCount">1341</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *  - memory_limit (which may have been increased by Phing)</pre></td>
</tr>
<tr>
<td class="lineCount">1342</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *</pre></td>
</tr>
<tr>
<td class="lineCount">1343</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return void</pre></td>
</tr>
<tr>
<td class="lineCount">1344</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1345</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    private static function restoreIni()</pre></td>
</tr>
<tr>
<td class="lineCount">1346</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    {</pre></td>
</tr>
<tr>
<td class="lineCount">1347</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        foreach(self::$origIniSettings as $settingName =&gt; $settingValue) {</pre></td>
</tr>
<tr>
<td class="lineCount">1348</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            switch($settingName) {</pre></td>
</tr>
<tr>
<td class="lineCount">1349</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                case 'error_reporting':</pre></td>
</tr>
<tr>
<td class="lineCount">1350</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    error_reporting($settingValue);</pre></td>
</tr>
<tr>
<td class="lineCount">1351</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    break;</pre></td>
</tr>
<tr>
<td class="lineCount">1352</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                default:</pre></td>
</tr>
<tr>
<td class="lineCount">1353</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">                    ini_set($settingName, $settingValue);</pre></td>
</tr>
<tr>
<td class="lineCount">1354</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            }</pre></td>
</tr>
<tr>
<td class="lineCount">1355</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1356</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1357</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1358</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1359</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Returns reference to Timer object.</pre></td>
</tr>
<tr>
<td class="lineCount">1360</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return Timer</pre></td>
</tr>
<tr>
<td class="lineCount">1361</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1362</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function getTimer() {</pre></td>
</tr>
<tr>
<td class="lineCount">1363</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        if (self::$timer === null) {</pre></td>
</tr>
<tr>
<td class="lineCount">1364</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            include_once 'phing/system/util/Timer.php';</pre></td>
</tr>
<tr>
<td class="lineCount">1365</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">            self::$timer= new Timer();</pre></td>
</tr>
<tr>
<td class="lineCount">1366</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        }</pre></td>
</tr>
<tr>
<td class="lineCount">1367</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        return self::$timer;</pre></td>
</tr>
<tr>
<td class="lineCount">1368</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1369</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1370</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1371</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Start up Phing.</pre></td>
</tr>
<tr>
<td class="lineCount">1372</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Sets up the Phing environment but does not initiate the build process.</pre></td>
</tr>
<tr>
<td class="lineCount">1373</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return void</pre></td>
</tr>
<tr>
<td class="lineCount">1374</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @throws Exception - If the Phing environment cannot be initialized.</pre></td>
</tr>
<tr>
<td class="lineCount">1375</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1376</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function startup() {</pre></td>
</tr>
<tr>
<td class="lineCount">1377</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1378</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // setup STDOUT and STDERR defaults</pre></td>
</tr>
<tr>
<td class="lineCount">1379</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::initializeOutputStreams();</pre></td>
</tr>
<tr>
<td class="lineCount">1380</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1381</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        // some init stuff</pre></td>
</tr>
<tr>
<td class="lineCount">1382</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::getTimer()-&gt;start();</pre></td>
</tr>
<tr>
<td class="lineCount">1383</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1384</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setSystemConstants();</pre></td>
</tr>
<tr>
<td class="lineCount">1385</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setIncludePaths();</pre></td>
</tr>
<tr>
<td class="lineCount">1386</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::setIni();</pre></td>
</tr>
<tr>
<td class="lineCount">1387</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1388</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1389</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1390</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Halts the system.</pre></td>
</tr>
<tr>
<td class="lineCount">1391</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @deprecated This method is deprecated and is no longer called by Phing internally.  Any</pre></td>
</tr>
<tr>
<td class="lineCount">1392</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     *              normal shutdown routines are handled by the shutdown() method.</pre></td>
</tr>
<tr>
<td class="lineCount">1393</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @see shutdown()</pre></td>
</tr>
<tr>
<td class="lineCount">1394</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1395</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function halt() {</pre></td>
</tr>
<tr>
<td class="lineCount">1396</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::shutdown();</pre></td>
</tr>
<tr>
<td class="lineCount">1397</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1398</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1399</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    /**</pre></td>
</tr>
<tr>
<td class="lineCount">1400</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * Performs any shutdown routines, such as stopping timers.</pre></td>
</tr>
<tr>
<td class="lineCount">1401</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     * @return void</pre></td>
</tr>
<tr>
<td class="lineCount">1402</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">     */</pre></td>
</tr>
<tr>
<td class="lineCount">1403</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    public static function shutdown() {</pre></td>
</tr>
<tr>
<td class="lineCount">1404</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::restoreIni();</pre></td>
</tr>
<tr>
<td class="lineCount">1405</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">        self::getTimer()-&gt;stop();</pre></td>
</tr>
<tr>
<td class="lineCount">1406</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">    }</pre></td>
</tr>
<tr>
<td class="lineCount">1407</td>
<td class="coverageCount"></td>
<td><pre class="srcLine"></pre></td>
</tr>
<tr>
<td class="lineCount">1408</td>
<td class="coverageCount"></td>
<td><pre class="srcLine">}</pre></td>
</tr>
</table>
<br><table width="100%">
<tr><td><hr noshade size="1"></td></tr>
<tr><td class="small">Report generated at 2011-07-09T21:37:01+02:00</td></tr>
</table>
</body>
</html>
