<?xml version="1.0" encoding="UTF-8"?>
<ae:configurations xmlns:ae="http://agavi.org/agavi/config/global/envelope/1.0" xmlns="http://agavi.org/agavi/config/parts/config_handlers/1.0" parent="%core.system_config_dir%/config_handlers.xml">

    <ae:configuration>
        <handlers>

            <handler pattern="%core.config_dir%/routing.xml" class="AppKitXIncludeConfigHandler">
                <ae:parameters>
                    <ae:parameter name="query"><![CDATA[//ae:configurations/ae:configuration[@context='web']/routing:routes/routing:route[@name='modules']]]></ae:parameter>
                    <ae:parameter name="pointer"><![CDATA[xmlns(ae=http://agavi.org/agavi/config/global/envelope/1.0) xmlns(r=http://agavi.org/agavi/config/parts/routing/1.0) xpointer(//ae:configurations/ae:configuration/r:routes/node())]]></ae:parameter>
                    <ae:parameter name="includeNS">routing</ae:parameter>
                </ae:parameters>

                <validation>%core.agavi_dir%/config/xsd/routing.xsd</validation>
                <transformation>%core.agavi_dir%/config/xsl/routing.xsl</transformation>
            </handler>

            <handler pattern="%core.config_dir%/databases.xml" class="AppKitXIncludeConfigHandler">
                <ae:parameters>
                    <ae:parameter name="query"><![CDATA[//ae:configurations/ae:configuration/database:databases]]></ae:parameter>
                    <ae:parameter name="pointer"><![CDATA[xmlns(ae=http://agavi.org/agavi/config/global/envelope/1.0) xmlns(d=http://agavi.org/agavi/config/parts/databases/1.0) xpointer(//ae:configurations/ae:configuration/d:databases/node())]]></ae:parameter>
                </ae:parameters>

                <validation>%core.agavi_dir%/config/xsd/databases.xsd</validation>
                <transformation>%core.agavi_dir%/config/xsl/databases.xsl</transformation>
            </handler>

            <handler pattern="%core.config_dir%/translation.xml" class="AppKitXIncludeConfigHandler">
                <ae:parameters>
                    <ae:parameter name="query"><![CDATA[//ae:configurations/ae:configuration/t:translators[@default_domain='icinga.default']]]></ae:parameter>
                    <ae:parameter name="pointer"><![CDATA[xmlns(ae=http://agavi.org/agavi/config/global/envelope/1.0) xmlns(t=http://agavi.org/agavi/config/parts/translation/1.0) xpointer(//ae:configurations/ae:configuration/t:translators/t:translator)]]></ae:parameter>
                </ae:parameters>

                <validation>%core.agavi_dir%/config/xsd/translation.xsd</validation>
                <transformation>%core.agavi_dir%/config/xsl/translation.xsl</transformation>
            </handler>

            <handler pattern="%core.config_dir%/javascript.xml" class="AppKitXIncludeConfigHandler">
                <ae:parameters>
                    <ae:parameter name="query"><![CDATA[//ae:configurations/ae:configuration]]></ae:parameter>
                    <ae:parameter name="pointer"><![CDATA[xmlns(ae=http://agavi.org/agavi/config/global/envelope/1.0) xmlns(r=http://icinga.org/icinga/config/global/resource/1.0) xpointer(//ae:configurations/ae:configuration/r:javascript)]]></ae:parameter>
                    <ae:parameter name="handler">AppKitResourceConfigHandler</ae:parameter>
                </ae:parameters>

                <validation>%core.module_dir%/AppKit/lib/config/xsd/resource.xsd</validation>
                <transformation>%core.module_dir%/AppKit/lib/config/xsl/resource.xsl</transformation>
            </handler>

             <handler pattern="%core.config_dir%/css.xml" class="AppKitXIncludeConfigHandler">
                <ae:parameters>
                    <ae:parameter name="query"><![CDATA[//ae:configurations/ae:configuration]]></ae:parameter>
                    <ae:parameter name="pointer">
                        <ae:parameter><![CDATA[xmlns(ae=http://agavi.org/agavi/config/global/envelope/1.0) xmlns(r=http://icinga.org/icinga/config/global/resource/1.0) xpointer(//ae:configurations/ae:configuration/r:css_import)]]></ae:parameter>
                        <ae:parameter><![CDATA[xmlns(ae=http://agavi.org/agavi/config/global/envelope/1.0) xmlns(r=http://icinga.org/icinga/config/global/resource/1.0) xpointer(//ae:configurations/ae:configuration/r:css)]]></ae:parameter>
                    </ae:parameter>
                    <ae:parameter name="handler">AppKitResourceConfigHandler</ae:parameter>
                </ae:parameters>

                <validation>%core.module_dir%/AppKit/lib/config/xsd/resource.xsd</validation>
                <transformation>%core.module_dir%/AppKit/lib/config/xsl/resource.xsl</transformation>
            </handler>
        </handlers>
    </ae:configuration>
</ae:configurations>
