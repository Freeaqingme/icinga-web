<?xml version="1.0" encoding="UTF-8"?>

<!--
	ICINGA base configuration
-->

<settings prefix="de.icinga." xmlns="http://agavi.org/agavi/1.0/config">

	<!--
		Add more links under 'home'
		* The home itself points to index_page route
	-->
	<setting name="appkit.home_links">
		<parameter name="icinga.about">About</parameter>
	</setting>

	<!--
		The webpath, with a leading slash and no trailing
		* If the path is empty, we try to detect the path
	-->
	<setting name="appkit.web_path"></setting>
	
	<!-- 
		Overwrite php ini settings:
		* Enable the garbage collector for sessions
	-->
	<setting name="appkit.php_settings">
		<parameter name="session.gc_probability">3</parameter>
		<parameter name="session.gc_divisor">100</parameter>
		<parameter name="session.gc_maxlifetime">86400</parameter>
		
		<!-- Set the default timezone, this is missing on some systems -->
		<parameter name="date.timezone">GMT</parameter>
	</setting>
	
	<!-- 
		AutoLoader
		* Add additional directory to the loader.
	-->
	<setting name="appkit.autoloader.paths">
		<parameter>%core.root_dir%/lib/appkit</parameter>
		<parameter>%core.app_dir%/lib/icinga</parameter>
	</setting>
	
	<!-- The class prefixes -->
	<setting name="appkit.autoloader.prefixes">
		<parameter>AppKit</parameter>
		<parameter>Icinga</parameter>
	</setting>
	
	<!--
		Doctrine setup
		* Path to lib and to the models
		* Relative to AppKit::bootstrap, otherwise throws errors!
	-->
	<setting name="appkit.doctrine_path">%core.root_dir%/lib/doctrine/lib</setting>
	<setting name="appkit.doctrine_model_path">%core.root_dir%/lib/appkit/database/models</setting>
	
	<!--
		AppKit image dispatcher
	-->
	<setting name="appkit.image_path">%core.root_dir%/pub/images</setting>

	<!-- 
		Menu extender
		* Register classes to change the navigation
	-->
	<setting name="appkit.menu_extender">
		<parameter>IcingaMenuExtender</parameter>
	</setting>

	<!-- 
		Eventhandling
		* Code-less, predefined events to register tasks
	-->
	<setting name="appkit.custom_events">
	
		<!-- This is our root menu (If all ready, the sub menues will be created -->
		<parameter name="AppKitMenuEventDistributor">
			<parameter name="event">appkit.menu</parameter>
			<parameter name="class">AppKitMenuCreator</parameter>
		</parameter>
	
		<!-- Providing ExtJS stateful information -->
		<parameter name="AppKitExtApplicationStateData">
			<parameter name="event">appkit.headerdata.publish</parameter>
			<parameter name="class">AppKitExtStateProviderData</parameter>
			
			<!-- 
				constructor argument:
				we need the route name where the browser can load our data
			-->
			<parameter name="parameter">
				<parameter name="route">appkit.ext.applicationState</parameter>
			</parameter>
		</parameter>
	</setting>

	<!-- 
		Stylesheet includes
		* Relative to your web
		* The real web oath will be prepended
	-->
	<setting name="appkit.include_styles">		
	
		<!-- ICINGAWireFrame css -->
		<parameter>/styles/WireFrameDefault.css</parameter>
		<parameter>/styles/WireFrameStructural.css</parameter>
		
		<!-- ExtJS -->
		<parameter>/js/ext3/resources/css/ext-all-notheme.css</parameter>

		<!-- JIT - JavaScript InfoVis Toolkit -->
		<parameter>/styles/statusmap.css</parameter>

		<!-- ICINGA -->
		<parameter>/styles/silk-icons.css</parameter>
		<parameter>/styles/extjs/ext-all.css</parameter>
		<parameter>/styles/extjs/ux-all.css</parameter>
		<parameter>/styles/Icinga.css</parameter>
	</setting>
	
	<!-- 
		Metatags
	-->
	<setting name="appkit.meta_tags">
		<parameter name="author">(c) 2009 Icinga developer team - www.icinga.org</parameter>
		<parameter name="robots">noindex</parameter>
	</setting>
	
	<!-- 
		Javascript includes
		* please provide absolute paths, we create one big file later.
	-->
	<setting name="appkit.include_javascript">

		<!-- Firebug lite for debug purposes -->
		<!-- <parameter>%core.root_dir%/lib/firebug/firebug-lite-compressed.js</parameter> -->
		
		<!-- ExtJS base files -->
		<parameter>%core.root_dir%/lib/ext3/adapter/ext/ext-base.js</parameter>
		<parameter>%core.root_dir%/lib/ext3/ext-all.js</parameter>
		<parameter>%core.root_dir%/lib/ext3/examples/ux/Portal.js</parameter>
		<parameter>%core.root_dir%/lib/ext3/examples/ux/PortalColumn.js</parameter>
		<parameter>%core.root_dir%/lib/ext3/examples/ux/Portlet.js</parameter>
		<parameter>%core.root_dir%/lib/ext3/examples/ux/DataView-more.js</parameter>
		<parameter>%core.root_dir%/lib/ext3/examples/ux/GroupTabPanel.js</parameter>
		<parameter>%core.root_dir%/lib/ext3/examples/ux/GroupTab.js</parameter>
		<parameter>%core.root_dir%/lib/ext3/examples/ux/SelectBox.js</parameter>
		<parameter>%core.root_dir%/lib/ext3/examples/ux/SlidingPager.js</parameter>
		<parameter>%core.root_dir%/lib/ext3/examples/ux/SliderTip.js</parameter>

		<!-- JIT - JavaScript InfoVis Toolkit -->
		<parameter>%core.root_dir%/lib/jit/Extras/excanvas.js</parameter>
		<parameter>%core.root_dir%/lib/jit/jit-yc.js</parameter>

		<!--AppKit JS -->
		<parameter>%core.root_dir%/lib/appkit/js/ext/SessionProvider.js</parameter>
		<parameter>%core.root_dir%/lib/appkit/js/ext/ExtJs.js</parameter>
		<parameter>%core.root_dir%/lib/appkit/js/ext/ScriptDynaLoader.js</parameter>
		<parameter>%core.root_dir%/lib/appkit/js/ext/FancyTextField.js</parameter>
		<parameter>%core.root_dir%/lib/appkit/js/SimpleDataProvider.js</parameter>
		<parameter>%core.root_dir%/lib/appkit/js/ext/FilterHandler.js</parameter>
		<parameter>%core.root_dir%/lib/appkit/js/ext/CronkMgr.js</parameter>
		<parameter>%core.root_dir%/lib/appkit/js/ext/grid/ColumnRenderer.js</parameter>
		<parameter>%core.root_dir%/lib/appkit/js/ext/grid/GridPanel.js</parameter>
		<parameter>%core.root_dir%/lib/appkit/js/ext/grid/MetaGridCreator.js</parameter>
		<parameter>%core.root_dir%/lib/appkit/js/ext/util/InterGridUtil.js</parameter>
		<parameter>%core.root_dir%/lib/appkit/js/ext/util/StructUtil.js</parameter>
		<parameter>%core.root_dir%/lib/appkit/js/ext/form/JSONSubmit.js</parameter>
		
		<!-- MISC -->
		<parameter>%core.root_dir%/lib/appkit/js/rmd160.js</parameter>
	</setting>

	<!--
		ScriptDynaLoader
		* This scripts are included dynamically by modules if needed (js code)
		* You have to predefine the libraries
	-->
	<setting name="appkit.include_dynamic_javascript">
		<parameter name="AppKit.Ext.grid.IcingaColumnRenderer">%core.module_dir%/Cronks/templates/System/ViewProc/js/IcingaColumnRenderer.js</parameter>
		<parameter name="Cronks.CommandHandler">%core.module_dir%/Cronks/templates/System/ViewProc/js/IcingaCommandHandler.js</parameter>
		<parameter name="Cronks.JitStatusMap">%core.module_dir%/Cronks/templates/System/js/JitStatusMap.js</parameter>
		<parameter name="Cronks.CronkTrigger">%core.module_dir%/Cronks/templates/System/js/CronkTrigger.js</parameter>
	</setting>

	<!--
		Doctrine pager configuration
		* deprecated, test to remove
	-->
	<setting name="appkit.pager.default_items">20</setting>

	<!-- 
		AppKitFactories
	-->
	<setting name="appkit.factories">
		<!-- Cache provider -->
		<parameter name="CacheProvider">
			<parameter name="class">AppKitFileCache</parameter>
			<parameter name="file">%core.root_dir%/lib/appkit/cache/AppKitFileCache.class.php</parameter>
			
			<parameter name="requiredClasses">
				<parameter name="AppKitCache">%core.root_dir%/lib/appkit/cache/AppKitCache.class.php</parameter>
			</parameter>
			
			<parameter name="cacheDefaultRegion">appkit.cache.default</parameter>
			<parameter name="cacheDefaultLifetime">86400</parameter> <!-- format in seconds,  24h -->
			
			<parameter name="cacheTransactionType">AppKitCache::COMMIT_POOL</parameter>
			<parameter name="cacheSerializeType">AppKitCache::SERIALIZE_PHP</parameter>
			
			<!-- DISABLE THE CACHE FOR DEVELOPMENT REASONS -->
			<parameter name="cacheBypass">true</parameter>
			
			<parameter name="fileDataDir"><![CDATA[/tmp/icinga_web]]></parameter>
		</parameter>
		
		<!-- GLOBAL MESSAGE QUEUE -->
		<parameter name="MessageQueue">
			<parameter name="class">AppKitMessageQueue</parameter>
			<parameter name="file">%core.root_dir%/lib/appkit/queue/AppKitMessageQueue.class.php</parameter>
			
			<parameter name="requiredClasses">
				<parameter name="AppKitArrayContainer">%core.root_dir%/lib/appkit/class/AppKitArrayContainer.class.php</parameter>
				<parameter name="AppKitQueue">%core.root_dir%/lib/appkit/queue/AppKitQueue.class.php</parameter>
			</parameter>
		</parameter>
	
		<!-- GLOBAL AUTH PROVIDER -->
		<parameter name="AuthProvider">
		<!-- Authenticate with Doctrine -->
			<parameter name="class">AppKitAuthProviderDatabase</parameter>
			<parameter name="file">%core.root_dir%/lib/appkit/auth/AppKitAuthProviderDatabase.class.php</parameter>
		 
		 <!-- Authentificate against ldap
		 	<parameter name="class">AppKitAuthProviderLdap</parameter>
		 	<parameter name="file">%core.root_dir%/lib/appkit/auth/AppKitAuthProviderLdap.class.php</parameter>
		 	<parameter name="ldap_dsn">ldap://int.icinga.de/</parameter>
		 	<parameter name="ldap_basedn">DC=int,DC=icinga,DC=de</parameter>
		 	<parameter name="ldap_domain">INT.ICINGA.DE</parameter>
		 	<parameter name="ldap_binddn">USER@INT.ICINGA.DE</parameter>
		 	<parameter name="ldap_bindpw">password</parameter>
		 	<parameter name="ldap_type">CONST::AppKitAuthProviderLdap::TYPE_MSAD</parameter>
		 	<parameter name="ldap_filter_user"><![CDATA[(&(SAMAccountName=__USERNAME__))]]></parameter>
		 -->
		 
		 <!-- Authentificate with http basic auth
		 	<parameter name="class">AppKitAuthProviderHttpBasic</parameter>
		 	<parameter name="file">%core.root_dir%/lib/appkit/auth/AppKitAuthProviderHttpBasic.class.php</parameter>
		 	<parameter name="field">REMOTE_USER</parameter>
		  -->
		  
			<parameter name="requiredClasses">
				<parameter name="AppKitAuthProvider">%core.root_dir%/lib/appkit/auth/AppKitAuthProvider.class.php</parameter>
			</parameter>
		</parameter>
		
		<!-- icinga-api data interface -->
		<parameter name="IcingaData">
			<parameter name="class">IcingaData</parameter>
			<parameter name="file">%core.root_dir%/app/lib/icinga/factory/IcingaData.class.php</parameter>
			
			<parameter name="requiredClasses">
				<!-- NONE -->
			</parameter>
			
			<parameter name="api_file">%core.root_dir%/lib/icinga-api/IcingaApi.php</parameter>
			
			<!--
				API connection type
			-->
			<parameter name="api_type">IcingaApi::CONNECTION_IDO</parameter>
			
			<parameter name="config_type">mysql</parameter>
			<parameter name="config_host">127.0.0.1</parameter>

			
			<parameter name="config_port">3306</parameter>
			<parameter name="config_database">icinga</parameter>
			
			<parameter name="config_user">icinga</parameter>
			<parameter name="config_password">icinga</parameter>
			
			<parameter name="config_table_prefix">icinga_</parameter>
		</parameter>
		
		<parameter name="IcingaCommand">
			<parameter name="class">IcingaCommand</parameter>
			<parameter name="file">%core.root_dir%/app/lib/icinga/factory/IcingaCommand.class.php</parameter>
			
			<parameter name="requiredClasses">
				<!-- NONE -->
			</parameter>
			
			<parameter name="api_file">%core.root_dir%/lib/icinga-api/IcingaApi.php</parameter>
			
			<parameter name="interfaces">
			
				<parameter name="pipe1">
					<parameter name="enabled">true</parameter>
					<parameter name="type">IcingaApi::COMMAND_PIPE</parameter>
					
					<parameter name="pipe">/usr/local/icinga/var/rw/icinga.cmd</parameter>
				</parameter>
			
				<parameter name="ssh1">
					<parameter name="enabled">false</parameter>
					<parameter name="type">IcingaApi::COMMAND_SSH</parameter>
					
					<parameter name="ssh_bin">/usr/bin/ssh</parameter>
					<parameter name="ssh_user">icinga</parameter>
					<parameter name="ssh_host">127.0.0.15</parameter>
					<parameter name="ssh_port">22</parameter>
					<parameter name="ssh_timeout">20</parameter>
					<parameter name="ssh_pipe">/usr/local/icinga/var/rw/icinga.cmd</parameter>
				</parameter>
			</parameter>
			
			
		</parameter>
	</setting>
	
	<!-- 
		Version information
		* names, and revisions
	-->
	<setting name="appkit.version.copyright"><![CDATA[&#169; 2009-2010 Icinga Developer Team]]></setting>
	<setting name="appkit.version.homeref"><![CDATA[<a href="http://www.icinga.org/">www.icinga.org</a>]]></setting>
	<setting name="appkit.version.major">0</setting>
	<setting name="appkit.version.minor">9</setting>
	<setting name="appkit.version.patch">1</setting>
	<setting name="appkit.version.extension">alpha</setting>
	<setting name="appkit.version.name">icinga-web</setting>
	
	<!-- PLACEHOLDER -->
	<setting name="appkit.version.release"></setting>
	
	<setting name="web.xml_template_folder">%core.root_dir%/res/xml</setting>
	
	<!--
		XInclude
		* Include other xml resources
	-->
	
	<!-- Our cronks config goes here -->
	<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="cronks.xml"/>

	<!-- Include settings for simple-data provider -->
	<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="simple_data_provider.xml"/>
	
</settings>
