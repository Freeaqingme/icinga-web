<?xml version="1.0" encoding="UTF-8"?>
<configurations xmlns="http://agavi.org/agavi/1.0/config">
	<configuration>
		<routes>
		
			<!-- ICINGAAppKit routes -->
			<route name="appkit" pattern="^/appkit" module="%actions.default_module%" action="%actions.default_action%">
				
				<!-- Get an image -->
				<route name="appkit.image" pattern="^/image/(image:[\w\d-_\/\.]+)$" action="Widgets.ShowImage" output_type="image" />
				
				<route name="appkit.login" pattern="^/login" action="Login"/>
				<route name="appkit.logout" pattern="^/logout" action="Logout"/>
				<route name="appkit.about" pattern="^/about" action="%actions.default_action%"/>
				
				<route name="appkit.squishloader" pattern="^/squishloader/(type:([\w\.\-\_\s]+))" action="Widgets.SquishLoader" output_type="simplecontent" />
				
				<!-- AJAX handlers -->
				<route name=".ajax" pattern="^/ajax">
					<route name=".autocomplete" pattern="^/autocomplete/(type:[\w\._]+)" action="Ajax.AutoComplete" output_type="json" />
					<route name=".fs" pattern="^/fs/(type:[\w\._]+)" action="Ajax.FileSource" output_type="ajax" />
					<route name=".test" pattern="^/test" action="Ajax.Test" />
				</route>
				
				<route name="appkit.admin" pattern="^/admin" action="Admin.Index">
				
					<route name=".users" pattern="^/users" action="Admin.Users.Index">
						<route pattern="^/(id:(\d+|new))">
							<route name=".edit" pattern="^$" action="Admin.Users.Edit" />
						</route>
					</route>
					
					<route name="appkit.admin.groups" pattern="^/groups" action="Admin.Groups.Index">
						<route pattern="^/(id:(\d+|new))">
							<route name=".edit" pattern="^$" action="Admin.Groups.Edit" />
						</route>
					</route>
					
					<route name=".logs" pattern="^/logs" action="Admin.ViewLogs" />
					
				</route>
				
				
				
			</route>
			
			<!-- My routes (AppKit preferences) -->
			<route name="my" pattern="^/my" module="AppKit">
				<route pattern="^$" action="User.Index" />
				
				<route name=".preferences" pattern="^/preferences">
					<route pattern="^$" action="User.Preferences" /> 
				</route>
			</route>
			
			<!-- ICINGA routes -->
			<route name="icinga" pattern="^/web" module="Web">
				<route pattern="^$" action="Index" />
				
				<route name=".hostDetail" pattern="/host" action="Icinga.HostDetail">
					<route name=".single" pattern="^/(hostname:([\w\.\-\_\s]+))$" action="Icinga.HostDetailSingle" />
				</route>
				
				<route name=".serviceDetail" pattern="/service" action="Icinga.ServiceDetail">
					<route name=".single" pattern="^/(hostname:([\w\.\-\_\s]+))/(servicename:([\w\.\-\_\s]+))$" action="Icinga.ServiceDetailSingle" />
				</route>
				
				<route name=".viewTest" pattern="^/test$" action="Icinga.ViewTest" />
				
				<route pattern="^/cronks" name=".cronks" output_type="simplecontent" >

					<route name=".crloader" pattern="^/cloader/(cronk:([\w\.\-\_\s]+))" action="Icinga.Cronks.CronkLoader" />
				
					<route name=".crlisting.json" pattern="^/clisting/json" output_type="json" action="Icinga.Cronks.CronkListing" />
				
					<route name=".objectsearch.json" pattern="^/objectSearch/json" output_type="json" action="Icinga.Cronks.ObjectSearch" />
				
					<route name=".viewProc" pattern="^/viewproc/(template:([\w\.\-\_\s]+))">
						<route name=".json" pattern="^/json" output_type="json" action="Icinga.Cronks.ViewProc">
							<route name=".metaInfo" pattern="^/inf" action="Icinga.Cronks.ViewProc.MetaInformation" />
						</route>
					</route>
				</route>
				
			</route>
			
		</routes>
	</configuration>
</configurations>
