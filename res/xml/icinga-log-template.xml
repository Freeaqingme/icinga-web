<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<template>
    
    <!-- 
    	Meta description of the templates, that anybody
    	knows what the template is doing
    -->
    <meta>
        <parameter name="name">Logview</parameter>
        <parameter name="description">Structure for log entries</parameter>
        <parameter name="author">Marius Hein</parameter>
    </meta>
    
    <!-- 
    	Options for the template. Change layout and view style to fit the type you
    	want to display
    -->
    <option>
        <parameter name="mode">default</parameter>
        <parameter name="layout">IcingaTemplateAjaxGridLayout</parameter> 
    </option>
    
    <!-- 
    	What data to display? Define icinga data targets and countfields
    -->
    <datasource>
        <parameter name="target">IcingaApi::TARGET_LOG</parameter>
        
        <parameter name="limit">25</parameter>
        
        <parameter name="id">log_id</parameter>
        
        <!--
        	If the countmode is 'simple' countfields will be ignored always! To use with a pager
        	you have to use the 'field' mode to count all data independent from data
        -->
		<parameter name="countmode">field</parameter>
		
		<!-- 
			If the counting differs from data result you can specify a field to count
		-->
        <parameter name="countfields">
        	<parameter>LOG_ID</parameter>
        </parameter>
         
    </datasource>
    
    <!-- 
    	Paging record on its result
    -->
    <pager>
    	<parameter name="enabled">false</parameter>
    	<parameter name="size">25</parameter>
    	<parameter name="start">0</parameter>
    </pager>
    
    <grouping>
    	<parameter name="enabled">false</parameter>
    	<parameter name="field"></parameter>
    </grouping>
    
    <!--
    	Field decleration: What to display and how
    -->
    <fields>
    
        <field name="log_id">
        	<datasource>
        		<parameter name="field">LOG_ID</parameter>
        	</datasource>
        	
        	<display>
                <parameter name="visible">false</parameter>
                <parameter name="label">Id</parameter>
            </display>
            
            <filter>
                <parameter name="enabled">false</parameter>    
            </filter>
            
            <order>
                <parameter name="enabled">false</parameter>
                <parameter name="default">false</parameter>
            </order>
        </field>     

        <field name="log_timestamp">
        	<datasource>
        		<parameter name="field">LOG_TIME</parameter>
        	</datasource>
        	
        	<display>
                <parameter name="visible">true</parameter>
                <parameter name="label">Timestamp</parameter>
            </display>
            
            <filter>
                <parameter name="enabled">false</parameter>    
            </filter>
            
            <order>
                <parameter name="enabled">true</parameter>
                <parameter name="default">true</parameter>
                <parameter name="order">DESC</parameter>
            </order>
        </field>  
    
        <field name="log_data">
        	<datasource>
        		<parameter name="field">LOG_DATA</parameter>
        	</datasource>
        	
        	<display>
                <parameter name="visible">true</parameter>
                <parameter name="label">Message</parameter>
            </display>
            
            <filter>
                <parameter name="enabled">false</parameter>    
            </filter>
            
            <order>
                <parameter name="enabled">true</parameter>
                <parameter name="default">false</parameter>
            </order>
        </field>     
        
    </fields>
    
</template>