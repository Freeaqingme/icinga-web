<?xml version="1.0" encoding="UTF-8"?>
<!--
    access.xml
    This files defines which hosts exist, which icinga-instance they represent and which actions can be performed on them.
    
    It conists of three parts: instances, defaults and hosts:
    -instances:  
        Simple mapping of instance names to host names,
    
    -defaults:
        Defines read, write, and execute access on files an folders that are used if hosts have the useDefaults flag active
        Rules will be accessed by their rules, especially important is the icinga_service, icinga_bin and icinga_pipe rules,
        which define where the service control, the binary and the icinga pipe can be found

    -hosts
        Defines hosts/servers that can be accessed via icinga-web and which rules to use for them
        The type can be either 'local', which means that actions will be performed directly on this system or 'ssh', which means
        that the host will be accessed via ssh (see example below). Not that you need php-libssh2 to use this
         

-->

<settings prefix="modules.api.access." xmlns="http://agavi.org/agavi/config/parts/module/1.0" xmlns:ae="http://agavi.org/agavi/config/global/envelope/1.0">
    
    <!-- Map your instances to hosts here -->
	<setting name="instances">
        <!-- 
        example: map instance default to localhost 
        <ae:parameter name="default">localhost</ae:parameter>
        
        -->
    </setting>

    <!--
        Default settings that will be set if useDefaults is true
    -->
    <setting name="defaults">
        <!-- 
            sets the default host to use 
		    <ae:parameter name="host">localhost</ae:parameter>
        -->
		<!-- 
            Define default access rights
        <ae:parameter name="access">
			<ae:parameter name="rw">
				<ae:parameter name="folders">
				</ae:parameter>
				<ae:parameter name="files">
				</ae:parameter>
			</ae:parameter>
			<ae:parameter name="r">
			</ae:parameter>
			<ae:parameter name="w">
				<ae:parameter name="files">
					<ae:parameter name="icinga_pipe">/usr/local/icinga/var/rw/icinga.cmd</ae:parameter>
				</ae:parameter>
			</ae:parameter>
			<ae:parameter name="x">
				<ae:parameter name="files">
					<ae:parameter name="icinga_service">/etc/init.d/icinga</ae:parameter>
					<ae:parameter name="icinga_bin">/usr/local/icinga/bin/icinga</ae:parameter>
					<ae:parameter name="echo">/bin/echo</ae:parameter>
					<ae:parameter name="printf">printf</ae:parameter>
					<ae:parameter name="cp">/bin/cp</ae:parameter>
					<ae:parameter name="ls">/bin/ls</ae:parameter>
					<ae:parameter name="grep">/bin/grep</ae:parameter>
				</ae:parameter>
			</ae:parameter>
		</ae:parameter>						
       --> 
	</setting>
	
	
	<!-- Hosts that can be accessed via the console interface -->
	<setting name="hosts">
	<!-- localhost overwrite
    	<ae:parameter name="localhost">
			<ae:parameter name="type">local</ae:parameter>

			<ae:parameter name="access">
				<ae:parameter name="useDefaults">true</ae:parameter>
			</ae:parameter>
		</ae:parameter>
    -->
		<!--  Example for ssh connection with user/password auth -->
<!--		<ae:parameter name="vm_host1">
			<ae:parameter name="type">ssh</ae:parameter>
			<ae:parameter name="ssh">
				<ae:parameter name="host">localhost</ae:parameter>
				<ae:parameter name="port">22</ae:parameter>
				<ae:parameter name="auth">
					<ae:parameter name="type">password</ae:parameter>
					<ae:parameter name="user">jmosshammer</ae:parameter>
					<ae:parameter name="password">test</ae:parameter>
				</ae:parameter>
			</ae:parameter> 
			<ae:parameter name="access">
				<ae:parameter name="useDefaults">true</ae:parameter>
			</ae:parameter>	
			
		</ae:parameter>

-->
<!--
		  This is experimental, try to avoid password encrypted keyfiles when encountering errors
		  Example for ssh connection with pubkey auth -->					
<!--	<ae:parameter name="vm_host2">
			<ae:parameter name="type">ssh</ae:parameter>
			<ae:parameter name="ssh">
				<ae:parameter name="host">localhost</ae:parameter>
				<ae:parameter name="port">22</ae:parameter>
				<ae:parameter name="auth">
					<ae:parameter name="type">key</ae:parameter>
					<ae:parameter name="user">testuser</ae:parameter>
					<ae:parameter name="pubKey">/usr/local/icinga-web/app/modules/Api/lib/.ssh/host1_rsa.pub</ae:parameter>
					<ae:parameter name="privKey">/usr/local/icinga-web/app/modules/Api/lib/.ssh/host1_rsa</ae:parameter>
					<ae:parameter name="password">secret123</ae:parameter>
				</ae:parameter>
			</ae:parameter> 
			
		
			<ae:parameter name="access">
				<ae:parameter name="useDefaults">true</ae:parameter>
			</ae:parameter>	
		</ae:parameter>
-->

	</setting>

</settings>
